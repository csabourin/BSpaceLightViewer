<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/public/favicon-mobile.ico">
 <link rel="stylesheet" href="/public/index.css">
  <!-- language switcher -->
  <script>
    const language = localStorage.getItem('language') || 'en';
    document.documentElement.lang = language;
  </script>
    <title>Open Content Viewer - Lecteur de contenu ouvert</title>
</head>
<body>
  <div class="fip">
    <img width="300" src="/public/CSPS_FipEng_Black-Red-Final.svg" alt="Canada School of Public Service">
  </div>
    <button id="langSwitch" onclick="switchLanguage()"></button>
    <h1 id="appTitle">Open Content Viewer</h1>
  <% if (sessionEnded) { %>
  <div id="sessionEnd" class="alert alert-warning" role="alert">
    Your session has ended. You have been redirected to the homepage.
  </div>
<% } %>
  <label id="searchlabel" class="sr-only" for="search">Search by title, filename or language:</label>
  <input type="text" id="search" placeholder="Search by title, filename or language...">
  <main class="container" role="main">
    <p id="srUpdate" class="sr-only" aria-live="polite"></p>   

       <% for(let i=0; i<packageFiles.length; i++) { %>
        <div class="tile" data-title="<%= packageFiles[i].title %>" data-file="<%= packageFiles[i].file %>" data-lang="<%= packageFiles[i].lang =="en-ca"?"English anglais":"French franÃ§ais" %>">
          <% if(packageFiles[i].imageUrl){ %>
            <img src="<%= packageFiles[i].imageUrl %>">
            <% } %>
  <a href="<%= packageFiles[i].file ? `/load/${encodeURIComponent(packageFiles[i].file)}?lang=${packageFiles[i].lang}` : 'javascript:' %>">
    <%= packageFiles[i].title %> <!-- displays the title -->
  </a>
</div>
    <% } %>
      <div class="adminConsole"><a tabindex="-1" href="/adminconsole" aria-label="Admin console">&#120645;</a></div>
       </main>
          <div id="overlay">
            <p id="loadingText">Loading...</p> <!-- Loading text -->
  <div id="spinner"></div>
  
</div>
<script src="/public/index.js"></script>
</body>
</html>
