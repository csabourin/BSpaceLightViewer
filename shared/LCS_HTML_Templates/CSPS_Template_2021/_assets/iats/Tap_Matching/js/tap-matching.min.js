var TAP_appContainer,TAP_buttonIcon,TAP_postQuizText,slotBackground,temp,tempPar,tempComp,ans,ansId,data,code,questionFile,idNum,tempArr,ti,validSrc,c,i,j,k,TapMatchingApp={mobileDevice:!1,ActivityType:null,AppData:null,currentAttempts:0,sessionTimer:0,timerInterval:null,ti:1,containerRef:null,hLightingEffect:!1,qCols:1,curQCol:1,accMATCont:"div",questionData:null,AnsSlotData:null,alreadySelected:!1,heightSet:!1,finishedQuiz:!1,allAnswered:!1,interval:null,headingLevel:null,continueButton:null,checkAnswersButton:null,resetWrongButton:null,resetButton:null,restartButton:null,submitButton:null,postQuizButton:null,instructionButton:null,droppedItem:null,notifications:!0,origPos:[],aMatch:[],qMatch:[],matchAmount:[],selectedElements:[],scoreEval:[],savedElements:[],savedAnswers:[],savedCorrectAnswers:[],savedBackgrounds:[],savedBackgroundColors:[],tappedItems:[],curQuestion:0},D2LDEBUG=!0;function d2log(t){void 0!==D2LDEBUG&&D2LDEBUG&&console.log(t)}TapMatchingApp.resetQuizData=function(){TapMatchingApp.sessionTimer=0,TapMatchingApp.alreadySelected=!1,TapMatchingApp.heightSet=!1,TapMatchingApp.finishedQuiz=!1,TapMatchingApp.allAnswered=!1,TapMatchingApp.interval=null,TapMatchingApp.origPos=[],TapMatchingApp.aMatch=[],TapMatchingApp.qMatch=[],TapMatchingApp.matchAmount=[],TapMatchingApp.selectedElements=[],TapMatchingApp.scoreEval=[],TapMatchingApp.savedElements=[],TapMatchingApp.savedAnswers=[],TapMatchingApp.savedCorrectAnswers=[]},TapMatchingApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(TapMatchingApp.containerRef=document.getElementById(e),TapMatchingApp.getAppData(TapMatchingApp.buildApp)):d2log("ERROR: Missing specified DOM object in TapMatchingApp.setupApp().")},TapMatchingApp.getAppData=function(t){$.getJSON(questionFile,(function(e){TapMatchingApp.AppData=e,t(TapMatchingApp.AppData)})).fail((function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)}))},TapMatchingApp.buildApp=function(){TapMatchingApp.questionData=TapMatchingApp.AppData.Questions,TapMatchingApp.Options=TapMatchingApp.AppData.Options,TapMatchingApp.Groups=TapMatchingApp.AppData.Groups,TapMatchingApp.ActivityType=TapMatchingApp.AppData.ActivityType;for(var t=0;t<TapMatchingApp.Groups.length;t++){TapMatchingApp.Groups[t].options=[];for(var e=0;e<TapMatchingApp.Options.length;e++)TapMatchingApp.Options[e].group==TapMatchingApp.Groups[t].key&&TapMatchingApp.Groups[t].options.push(TapMatchingApp.Options[e])}null!==TapMatchingApp.AppData.DefaultColor&&void 0!==TapMatchingApp.AppData.DefaultColor&&""!==TapMatchingApp.AppData.DefaultColor&&"none"!==TapMatchingApp.AppData.DefaultColor||(TapMatchingApp.AppData.DefaultColor="#FFFFFF"),null!==TapMatchingApp.AppData.DefaultSelectColor&&void 0!==TapMatchingApp.AppData.DefaultSelectColor&&""!==TapMatchingApp.AppData.DefaultSelectColor&&"none"!==TapMatchingApp.AppData.DefaultSelectColor||(TapMatchingApp.AppData.DefaultSelectColor="#B7E5E5"),null!==TapMatchingApp.AppData.DefaultHighlightColor&&void 0!==TapMatchingApp.AppData.DefaultHighlightColor&&""!==TapMatchingApp.AppData.DefaultHighlightColor&&"none"!==TapMatchingApp.AppData.DefaultHighlightColor||(TapMatchingApp.AppData.DefaultHighlightColor="#C6C8CA"),TapMatchingApp.AppData.DefaultColor="#FFFFFF",TapMatchingApp.hLightingEffect=!0,TapMatchingApp.headingLevel=parseInt(TapMatchingApp.AppData.HeadingLevel),null===TapMatchingApp.headingLevel||void 0===TapMatchingApp.headingLevel||"none"===TapMatchingApp.headingLevel||isNaN(TapMatchingApp.headingLevel)||""===TapMatchingApp.headingLevel?TapMatchingApp.headingLevel=1:TapMatchingApp.headingLevel>3&&(TapMatchingApp.headingLevel=3),TapMatchingApp.buildAppFrame(),TapMatchingApp.loadButtons(),!("none"!==TapMatchingApp.AppData.PreActivityText&&null!==TapMatchingApp.AppData.PreActivityText&&void 0!==TapMatchingApp.AppData.PreActivityText&&""!==TapMatchingApp.AppData.PreActivityText||"none"!==TapMatchingApp.AppData.PreActivityMedia&&null!==TapMatchingApp.AppData.PreActivityMedia&&void 0!==TapMatchingApp.AppData.PreActivityMedia&&""!==TapMatchingApp.AppData.PreActivityMedia)?TapMatchingApp.buildActivity():TapMatchingApp.buildPreQuiz(),"none"!==TapMatchingApp.AppData.PostActivityText&&null!==TapMatchingApp.AppData.PostActivityText&&void 0!==TapMatchingApp.AppData.PostActivityText&&""!==TapMatchingApp.AppData.PostActivityText&&"none"!==TapMatchingApp.AppData.PostActivityMedia&&null!==TapMatchingApp.AppData.PostActivityMedia&&void 0!==TapMatchingApp.AppData.PostActivityMedia&&""!==TapMatchingApp.AppData.PostActivityMedia&&!0!==TapMatchingApp.IncludePostPage&&(TapMatchingApp.IncludePostPage=!1),$(TapMatchingApp.containerRef).addClass("rs_preserve");try{PNotify.removeAll()}catch(t){TapMatchingApp.notifications=!1}},TapMatchingApp.autoSelect=function(t){if("Microsoft Internet Explorer"===navigator.appName){document.selection.empty();var e=document.body.createTextRange();e.moveToElementText(t),e.select()}},TapMatchingApp.buildAppFrame=function(){var t=document.createElement("section");t.id="TAP_container";var e=document.createElement("section");if(e.id="TAP_content","none"!==TapMatchingApp.AppData.ActivityName){var a=document.createElement("section");$(a).addClass("banner-text"),a.innerHTML="<h"+TapMatchingApp.headingLevel+">"+TapMatchingApp.AppData.ActivityName+"</h"+TapMatchingApp.headingLevel+">"}else Tap_header=!1;t.appendChild(e),$(t).appendTo(TapMatchingApp.containerRef),$("<div/>",{id:"AccMessageDisp",class:"AccMessage",text:"Stuff"}).appendTo("body"),(TAP_appContainer=document.createElement("div")).id="TAP_appContainer",TAP_appContainer.setAttribute("role","main"),$(a).appendTo(e),e.appendChild(TAP_appContainer)},TapMatchingApp.loadButtons=function(){(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon");var t=document.createElement("button");t.id="TAP_checkButton",t.setAttribute("class","TAP_button"),t.setAttribute("title","Checks the Answers"),t.onclick=function(){TapMatchingApp.checkAnswers()};var e=document.createElement("span");e.setAttribute("class","TAP_buttonLabel"),e.innerHTML="Check Answers",t.appendChild(e),TapMatchingApp.checkAnswersButton=t,(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon");var a=document.createElement("button");a.id="TAP_resetWrongButton",a.setAttribute("class","TAP_button"),a.setAttribute("title","Resets the Wrong Draggable Items"),a.onclick=function(){TapMatchingApp.resetWrong()};var p=document.createElement("span");p.setAttribute("class","TAP_buttonLabel"),p.innerHTML="Reset Wrong",a.appendChild(p),a.disabled=!0,TapMatchingApp.resetWrongButton=a,(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon");var i=document.createElement("button");i.id="TAP_resetButton",i.setAttribute("class","TAP_button"),i.setAttribute("title","Resets All the Draggable Items"),i.onclick=function(){TapMatchingApp.reset()};var n=document.createElement("span");n.setAttribute("class","TAP_buttonLabel"),n.innerHTML="Reset All",i.appendChild(n),TapMatchingApp.resetButton=i,(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon");var c=document.createElement("button");c.id="TAP_restartButton",c.setAttribute("class","TAP_button"),c.setAttribute("title","Restarts the Activity"),c.onclick=function(){TapMatchingApp.clearStage(),TapMatchingApp.resetQuizData(),!("none"!==TapMatchingApp.AppData.PreActivityText&&null!==TapMatchingApp.AppData.PreActivityText&&void 0!==TapMatchingApp.AppData.PreActivityText&&""!==TapMatchingApp.AppData.PreActivityText||"none"!==TapMatchingApp.AppData.PreActivityMedia&&null!==TapMatchingApp.AppData.PreActivityMedia&&void 0!==TapMatchingApp.AppData.PreActivityMedia&&""!==TapMatchingApp.AppData.PreActivityMedia)?TapMatchingApp.buildActivity():TapMatchingApp.buildPreQuiz()};var s=document.createElement("span");s.setAttribute("class","TAP_buttonLabel"),s.innerHTML="Reset Activity",c.appendChild(s),TapMatchingApp.restartButton=c;var o=document.createElement("button");o.id="TAP_continueButton",o.setAttribute("class","TAP_button"),o.onclick=function(){TapMatchingApp.clearStage(),TapMatchingApp.buildActivity(),TapMatchingApp.timerInterval=setInterval(TapMatchingApp.timer,1e3)};var r=document.createElement("span");r.setAttribute("class","TAP_buttonLabel"),o.setAttribute("title","Starts the Activity"),r.innerHTML="Start Now",o.appendChild(r),TapMatchingApp.continueButton=o,(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon");var d=document.createElement("button");d.id="TAP_postQuizButton",d.setAttribute("class","TAP_button"),d.setAttribute("title","Finishes the Activity"),d.onclick=function(){TapMatchingApp.clearStage(),TapMatchingApp.buildPostQuiz()};var h=document.createElement("span");h.setAttribute("class","TAP_buttonLabel"),h.innerHTML="Move On",d.appendChild(h),TapMatchingApp.postQuizButton=d,(TAP_buttonIcon=document.createElement("div")).setAttribute("class","TAP_buttonIcon"),TAP_buttonIcon.setAttribute("style","margin:0px auto;")},TapMatchingApp.buildPreQuiz=function(){if(TapMatchingApp.ti=1,"none"!==TapMatchingApp.AppData.PreActivityText&&null!==TapMatchingApp.AppData.PreActivityText&&void 0!==TapMatchingApp.AppData.PreActivityText&&""!==TapMatchingApp.AppData.PreActivityText){var t=document.createElement("p");t.id="TAP_preQuizText",t.innerHTML=TapMatchingApp.AppData.PreActivityText,$(t).hide().appendTo(TAP_appContainer).fadeIn(500)}if("none"!==TapMatchingApp.AppData.PreActivityMedia&&null!==TapMatchingApp.AppData.PreActivityMedia&&void 0!==TapMatchingApp.AppData.PreActivityMedia&&""!==TapMatchingApp.AppData.PreActivityMedia)for(i=0;i<TapMatchingApp.AppData.PreActivityMedia.length;i++)TapMatchingApp.EmbedMedia(TAP_appContainer,TapMatchingApp.AppData.PreActivityMedia[i]);TapMatchingApp.buildPreQuizButtons(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},TapMatchingApp.buildPreQuizButtons=function(){var t=document.createElement("div");t.id="TAP_buttonSet",$(t).hide().appendTo(TAP_appContainer).fadeIn(500),t.appendChild(TapMatchingApp.continueButton),TapMatchingApp.continueButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++},TapMatchingApp.buildPostQuiz=function(){if(TapMatchingApp.ti=1,"none"!==TapMatchingApp.AppData.PostActivityText&&null!==TapMatchingApp.AppData.PostActivityText&&void 0!==TapMatchingApp.AppData.PostActivityText&&""!==TapMatchingApp.AppData.PostActivityText?((TAP_postQuizText=document.createElement("p")).id="TAP_postQuizText",TAP_postQuizText.innerHTML=TapMatchingApp.AppData.PostActivityText,$(TAP_postQuizText).hide().appendTo(TAP_appContainer).fadeIn(500)):((TAP_postQuizText=document.createElement("p")).id="HS_postActivityText",TAP_postQuizText.innerHTML="You have completed the activity!",$(TAP_postQuizText).hide().appendTo(TAP_appContainer).fadeIn(500)),"none"!==TapMatchingApp.AppData.PostActivityMedia&&null!==TapMatchingApp.AppData.PostActivityMedia&&void 0!==TapMatchingApp.AppData.PostActivityMedia&&""!==TapMatchingApp.AppData.PostActivityMedia)for(i=0;i<TapMatchingApp.AppData.PostActivityMedia.length;i++)TapMatchingApp.EmbedMedia(TAP_appContainer,TapMatchingApp.AppData.PostActivityMedia[i]);TapMatchingApp.buildPostQuizButtons(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},TapMatchingApp.buildPostQuizButtons=function(){var t=document.createElement("div");t.id="TAP_buttonSet",TAP_appContainer.appendChild(t),t.appendChild(TapMatchingApp.restartButton),TapMatchingApp.restartButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++},TapMatchingApp.buildActivity=function(){for(TapMatchingApp.ti=1,i=0;i<TapMatchingApp.Options.length;i++)TapMatchingApp.origPos.push(null),temp=TapMatchingApp.Options[i].text,TapMatchingApp.qMatch.push(temp);for(j=0;j<TapMatchingApp.Groups.length;j++){temp=TapMatchingApp.Groups[j].key,TapMatchingApp.aMatch.push(temp);var t=0;for(k=0;k<TapMatchingApp.Options.length;k++)TapMatchingApp.Options[k].group===TapMatchingApp.Groups[j].key&&t++;TapMatchingApp.matchAmount.push(t)}TapMatchingApp.buildInstructions(),TapMatchingApp.buildTiles(),TapMatchingApp.buildActivityButtons(),TapMatchingApp.initAccMAT(),"report"===TapMatchingApp.AppData.FeedbackType&&(document.getElementById("TAP_checkButton").disabled=!0,$("#TAP_checkButton").hide()),$("#TAP_instructions").attr("tabindex",TapMatchingApp.ti),$("[tabindex=1]").focus()},TapMatchingApp.buildActivityButtons=function(){var t=document.createElement("div");t.id="TAP_buttonSet",$(t).hide().appendTo(TAP_appContainer).fadeIn(500),TapMatchingApp.checkAnswersButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,"continuous"===TapMatchingApp.AppData.FeedbackType?(t.appendChild(TapMatchingApp.resetWrongButton),$("#TAP_resetWrongButton").hide(),TapMatchingApp.resetWrongButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++):(t.appendChild(TapMatchingApp.resetButton),TapMatchingApp.resetButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++)},TapMatchingApp.buildReport=function(){TapMatchingApp.ti=1,TapMatchingApp.findCorrectAnswers();var t=TapMatchingApp.calculateScore(),e=document.createElement("div");e.id="TAP_report";var a=document.createElement("h"+(TapMatchingApp.headingLevel+1));a.setAttribute("class","TAP_resultsHeader"),a.innerHTML="Results:",e.appendChild(a);var p=document.createElement("h"+(TapMatchingApp.headingLevel+2));p.setAttribute("class","TAP_scoreHeader");for(var i=0,n=0;n<TapMatchingApp.matchAmount.length;n++)i+=TapMatchingApp.matchAmount[n];for(p.innerHTML="You scored "+t+"/"+i+"!",e.appendChild(p),n=0;n<TapMatchingApp.AnsSlotData.length;n++)if(TapMatchingApp.matchAmount[n]>0){var c=document.createElement("div");c.setAttribute("class","TAP_miniReport");var s=document.createElement("h"+(TapMatchingApp.headingLevel+3));s.setAttribute("class","TAP_dropzoneHeader"),s.innerHTML=TapMatchingApp.AnsSlotData[n].title,c.appendChild(s),e.appendChild(c);var o=document.createElement("ul");for(o.setAttribute("class","TAP_miniReportContent"),c.appendChild(o),j=0;j<TapMatchingApp.savedElements.length;j++)if(TapMatchingApp.AnsSlotData[n].key===TapMatchingApp.savedAnswers[j]){var r=document.createElement("li"),d=document.createElement("div");switch($(d).addClass("bg-light TAP_feedback"),TapMatchingApp.scoreEval[j]){case 1:r.innerHTML=TapMatchingApp.savedElements[j],o.appendChild(r),$(r).append('<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOTZFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5NEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5NUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqYsgfwAAAFBSURBVHjaYvz//z8DLQETw5ADW/w7wBgKGKluOANDOZTXyeCzsYKRioY3AMl6NNEGZioZXgEkm7HIPGOkkuHtWGSWAXEcI4WGZwLJaVhkNgNxCDAOfjHS0nDyU9EW/0QgOQ+LzG4g9oEZTp4FW/yjgeQiLJl0P9Twb8iCjGgagUo2LqWW4QgLtvj7Ack1UDFQ+G3CYjhMDSuazCkgdgPq+YjNTYxYNP7GsIRMw2GFXS2aRlawYVv83aCGu+Ew/BIhw2E+EAXS+4BYB03uOxA3AXEdEHOiyV0BYieg4a8JpQlYHOCyBBsg2nD0VCQDJA8AsTIe9XeB2B5o+FPSKxyfjU+ApAPUEFyGO5BiOPaMBvHJCSCWRhIFWW4JdQSFVSbCJzCXgmhHcgzHXSf7bLwDteQkNFjukFsmMg75VgVAgAEAWmBzHcug4yIAAAAASUVORK5CYII=" alt="right check mark" disabled/>'),"none"!==TapMatchingApp.questionData[j].correct&&null!==TapMatchingApp.questionData[j].correct&&void 0!==TapMatchingApp.questionData[j].correct&&""!==TapMatchingApp.questionData[j].correct&&(d.innerHTML="Feedback: "+TapMatchingApp.questionData[j].correct,o.appendChild(d));break;default:r.innerHTML=TapMatchingApp.savedElements[j]+" (Correct Answer: "+TapMatchingApp.savedCorrectAnswers[j]+")",o.appendChild(r),$(r).append('<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMUNFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjlENkQxOUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxQUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr+MFuwAAADiSURBVHjaxJY9DsIwDIXtHoCJkY1DdO2AWHuPHqj36IoYujJwBDZGJk7AM3KWoEa2JQtLr6na5Hup81cijRedeugOHSgY0lYZfXnGBY7iAu2gBzTs6fr0wlGs0BF6Q2cwblzBS7hMKniJr0mHy1zBSSuulnRtwEmZsxiM2mPymjTgJQsjGyv+pMvahr0NvHXZ2yu9N38tB/JKnlRyYPDICt80cJo01wwH57h5QXaUHP9JUeogp07T1IWWulWkbnYRuMdE1sESgUvou6FxnixiMOnx5oIbTIQ5pR/6lP3b8hFgAJ82ro/bie6BAAAAAElFTkSuQmCC" alt="wrong x" disabled/>'),"none"!==TapMatchingApp.questionData[j].wrong&&null!==TapMatchingApp.questionData[j].wrong&&void 0!==TapMatchingApp.questionData[j].wrong&&""!==TapMatchingApp.questionData[j].wrong&&(d.innerHTML="Feedback: "+TapMatchingApp.questionData[j].wrong,o.appendChild(d))}}}$(e).hide().appendTo(TAP_appContainer).fadeIn(500),$(".TAP_expand").remove(),TapMatchingApp.buildReportButtons(),$("TAP_header").focus(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},TapMatchingApp.buildReportButtons=function(){var t=document.createElement("div");t.id="TAP_buttonSet",TAP_appContainer.appendChild(t),!0===TapMatchingApp.AppData.IncludePostPage&&t.appendChild(TapMatchingApp.postQuizButton),TapMatchingApp.postQuizButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,t.appendChild(TapMatchingApp.restartButton),TapMatchingApp.restartButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++},TapMatchingApp.clearStage=function(){$("#TAP_appContainer").empty(),clearInterval(TapMatchingApp.interval)},TapMatchingApp.findCorrectAnswers=function(){for(i=0;i<TapMatchingApp.questionData.length;i++)for(j=0;j<TapMatchingApp.AnsSlotData.length;j++)TapMatchingApp.questionData[i].answer===TapMatchingApp.AnsSlotData[j].key&&TapMatchingApp.savedCorrectAnswers.push(TapMatchingApp.AnsSlotData[j].title)},TapMatchingApp.toggleInstructions=function(){},TapMatchingApp.buildTiles=function(){var t=document.createElement("div");t.id="TAP_qColContainer",t.className="TAP_questions";var e=[];for(i=0;i<TapMatchingApp.Options.length;i++)"text"===TapMatchingApp.Options[i].type&&(!0===TapMatchingApp.mobileDevice?e[i]='<div id="option'+i+'" onmousedown="TapMatchingApp.tapOption(event);" class="textNode tile" data-feedback-order="'+TapMatchingApp.Options[i].feedbackOrder+'" data-group="'+TapMatchingApp.Options[i].group+'">'+TapMatchingApp.Options[i].text+"</div>":(e[i]='<div class="tile" id="option'+i+'" data-group="'+TapMatchingApp.Options[i].group+'" aria-hidden="false" role="button" data-feedback-order="'+TapMatchingApp.Options[i].feedbackOrder+'" onmousedown="TapMatchingApp.tapOption(this);" onmouseover="TapMatchingApp.hLightEffect(this, true)" onmouseout="TapMatchingApp.hLightEffect(this, false)" onfocus="TapMatchingApp.hLightEffect(this, true)" onblur="TapMatchingApp.hLightEffect(this, false)" tabindex="0">',e[i]+='<div class="flex-center">',e[i]+="<div>"+TapMatchingApp.Options[i].text+"</div>","none"!==TapMatchingApp.Options[i].image&&(e[i]+='<img class="center" src="'+TapMatchingApp.Options[i].image+'" />'),e[i]+="</div>",e[i]+="</div>"));!0===TapMatchingApp.AppData.Randomize&&e.sort((function(){return.5-Math.random()}));var a=$("<div>").addClass("tile-container");for(j=0;j<TapMatchingApp.Options.length;j++)$(a).append(e[j]);$("#TAP_appContainer").append(a);var p=document.createElement("section");p.id="TAP_correctZone",$(a).after(p),$(".textNode").each((function(){this.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,idNum=parseInt(this.id.substr(4))})),$(".tile").keydown((function(t){13==t.keyCode&&(t.preventDefault(),this.dispatchEvent(new Event("mousedown")))}))},TapMatchingApp.tapOption=function(t){if(0===$(".animated.bounceOutDown").length){var e=TapMatchingApp.tappedItems.indexOf(t);-1===e?($(t).addClass("tapped"),TapMatchingApp.tappedItems.push(t),"continuous"===TapMatchingApp.AppData.FeedbackType&&TapMatchingApp.checkAnswers()):($(t).removeClass("tapped"),TapMatchingApp.tappedItems.splice(e,1))}},TapMatchingApp.buildInstructions=function(){var t,e=document.createElement("p");e.id="TAP_activityText","none"!==TapMatchingApp.AppData.Instructions&&null!==TapMatchingApp.AppData.Instructions&&void 0!==TapMatchingApp.AppData.Instructions&&""!==TapMatchingApp.AppData.Instructions&&(t=TapMatchingApp.AppData.Instructions);var a=document.createElement("span");a.id="TAP_iToggle",a.setAttribute("tabindex","1"),$(a).addClass("iDown"),a.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>',$(a).click((function(){!0===$(this).hasClass("iDown")?($(this).removeClass("iDown"),$(this).addClass("iUp"),$("#TAP_activityText").slideUp(500),this.innerHTML='&#9660;<span class="sr-only">Collapse instructions</span>'):($(this).addClass("iDown"),$(this).removeClass("iUp"),$("#TAP_activityText").slideDown(500),this.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>')})),$(a).keyup((function(t){13===t.keyCode&&$(this).click()})),e.innerHTML=t,$(e).hide().appendTo(TAP_appContainer).fadeIn(),$(a).hide().appendTo(TAP_appContainer).fadeIn()},TapMatchingApp.hLightEffect=function(t,e){if(!1===$(t).hasClass("dropped"))return!0===TapMatchingApp.hLightingEffect&&!0!==TapMatchingApp.alreadySelected&&(e?$("#"+t.id).addClass("hover"):(idNum=parseInt(t.id.substr(4)),$("#"+t.id).removeClass("hover"))),!1},TapMatchingApp.allowDrop=function(t){t.preventDefault()},TapMatchingApp.allowRevert=function(t){t.preventDefault()},TapMatchingApp.checkDropzone=function(t){for(i=0;i<TapMatchingApp.questionData.length;i++)if(-1!==t.className.search("dropzone"))return!0},TapMatchingApp.checkParentDropzone=function(t){for(i=0;i<TapMatchingApp.questionData.length;i++)if(-1!==t.parentNode.className.search("dropzone"))return!0},TapMatchingApp.checkChildDropzone=function(t){for(i=0;i<TapMatchingApp.questionData.length;i++)if(-1!==t.lastChild.className.search("dropzone"))return!0},TapMatchingApp.checkSiblingDropzone=function(t){for(i=0;i<TapMatchingApp.questionData.length;i++)if(-1!==t.parentNode.parentNode.lastChild.className.search("dropzone"))return!0},TapMatchingApp.drag=function(t){var e;(!0===TapMatchingApp.notifications&&PNotify.removeAll(),!0===TapMatchingApp.mobileDevice&&TapMatchingApp.setHeight(),(e=!0===$(t.target).hasClass("draggableImage")?t.target.parentNode:t.target).setAttribute("ondrop","TapMatchingApp.drop(event);"),!1===$(t.target).hasClass("dropped"))&&("Microsoft Internet Explorer"===navigator.appName?t.dataTransfer.setData("text",e.id):t.dataTransfer.setData("Text",e.id),e.setAttribute("aria-grabbed","true"),e.setAttribute("aria-dropeffect","move"))},TapMatchingApp.drop=function(t){var e=navigator.appName;data="Microsoft Internet Explorer"===e?t.dataTransfer.getData("text"):t.dataTransfer.getData("Text");var a,p,i,n=document.getElementById(data);t.preventDefault(),TapMatchingApp.checkDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target,a=t.target.parentNode.id):TapMatchingApp.checkParentDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target.parentNode,a=t.target.parentNode.parentNode.id):TapMatchingApp.checkSiblingDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target.parentNode.parentNode.lastChild,a=t.target.parentNode.parentNode.id):TapMatchingApp.checkChildDropzone(t.target)&&"drag"===data.substr(0,4)&&($_this=t.target.lastChild,a=t.target.id);var c=[];if($.each($("#"+a+" .draggableTextNode"),(function(t,e){c.push(e.getAttribute("id"))})),$.inArray(n.getAttribute("id"),c)>-1)return!1;void 0!==a&&(idNum=parseInt(a.substr(10)),p=TapMatchingApp.matchAmount[idNum],i=$($_this).children().length+1,n.setAttribute("aria-grabbed","false"),n.removeAttribute("aria-dropeffect"),n.removeAttribute("ondrop"),i>p&&!0===TapMatchingApp.notifications&&new PNotify({text:$($_this).attr("title")+" is full",type:"info"}),"match"===TapMatchingApp.ActivityType?$($_this).is(":empty")&&("text"===TapMatchingApp.questionData[idNum].type&&(!0===$(n).hasClass("collapsed")&&$(n).removeClass("collapsed"),n.offsetHeight>26&&n.offsetHeight<=28&&$(n).addClass("fullExpand")),$_this.appendChild(n),TapMatchingApp.HandleMobileDrop()):i<=p&&("text"===TapMatchingApp.questionData[idNum].type&&(!0===$(n).hasClass("collapsed")&&$(n).removeClass("collapsed"),n.offsetHeight>26&&n.offsetHeight<=28&&$(n).addClass("fullExpand")),$_this.appendChild(n),TapMatchingApp.HandleMobileDrop())),TapMatchingApp.checkAllAnswered(),!0===$("#TAP_iToggle").hasClass("iDown")&&$("#TAP_iToggle").click(),$(n).removeClass("hover")},TapMatchingApp.revert=function(t){data=t.dataTransfer.getData("Text");var e=parseInt(data.substr(4,data.length)),a=TapMatchingApp.origPos[e];t.preventDefault(),temp=document.getElementById(data),!0===$(temp).hasClass("collapsed")&&$(temp).removeClass("collapsed"),!0===$(temp.firstChild).hasClass("TAP_expand")&&$(temp.firstChild).remove(),document.getElementById(data).setAttribute("aria-grabbed","false"),document.getElementById(data).removeAttribute("aria-dropeffect"),a.appendChild(temp),TapMatchingApp.checkAllAnswered()},TapMatchingApp.revertKeyboard=function(t){var e=t.id,a=parseInt(e.substr(4,e.length)),p=TapMatchingApp.origPos[a];!0===$(t).hasClass("collapsed")&&$(t).removeClass("collapsed"),!0===$(t.firstChild).hasClass("TAP_expand")&&$(t.firstChild).remove(),t.setAttribute("aria-grabbed","false"),t.removeAttribute("aria-dropeffect"),$(t).hide().appendTo(p).fadeIn(500),$("#screenAlert").html("Returned "+t.innerHTML+" to original position.").focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3),TapMatchingApp.ExitAccessDropMode(),TapMatchingApp.checkAllAnswered()},TapMatchingApp.evaluateScore=function(){"continuous"===TapMatchingApp.AppData.FeedbackType&&($(".correct").remove(),$(".wrong").remove());var t,e=TapMatchingApp.AppData.Questions[TapMatchingApp.curQuestion].answerGroupKeys;if("continuous"===TapMatchingApp.AppData.FeedbackType)for(i=0;i<e.length;i++){for(var a,p=0,n=0;n<TapMatchingApp.Groups.length;n++)if(TapMatchingApp.Groups[n].key==e[i]){a=TapMatchingApp.Groups[n];break}for(t=0;t<TapMatchingApp.tappedItems.length;t++)a.key==$(TapMatchingApp.tappedItems[t]).attr("data-group")&&p++;if(p==a.options.length&&TapMatchingApp.tappedItems.length==a.options.length){$(TapMatchingApp.tappedItems).addClass("correcto").removeAttr("onmousedown").removeAttr("onmouseover").removeAttr("onmouseout").removeAttr("onblur").removeAttr("onfocus").removeAttr("role");for(let t=0;t<TapMatchingApp.tappedItems.length;t++)t===TapMatchingApp.tappedItems.length-1?($(TAP_appContainer).css("overflow","hidden"),$(TapMatchingApp.tappedItems[t]).animateCss("bounceOutDown",(function(){var t=$(TapMatchingApp.tappedItems).detach();t.sort((function(t,e){return $(t).attr("data-feedback-order")<$(e).attr("data-feedback-order")?-1:$(t).attr("data-feedback-order")>$(e).attr("data-feedback-order")?1:0})),html=$("<div>"),html.append(t),$(t).fadeIn(),feedback=$("<div>"),feedback.addClass("feedback"),feedback.text(a.feedback),html.append(feedback),html.addClass("feedback-container"),$(html).hide();let e=$("<hr>");e.hide(),$("#TAP_correctZone").append(e),$("#TAP_correctZone").append(html),$(e).fadeIn(),$(html).fadeIn(),TapMatchingApp.tappedItems=[],$(TAP_appContainer).css("overflow",""),TapMatchingApp.checkIfAllAnswered()}))):($(TapMatchingApp.tappedItems[t]).animateCss("bounceOutDown"),i=e.length)}else TapMatchingApp.tappedItems.length>1&&i==e.length-1&&($(TapMatchingApp.tappedItems).animateCss("headShake"),$(TapMatchingApp.tappedItems).removeClass("tapped"),TapMatchingApp.tappedItems=[])}else{for(i=0;i<TapMatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),tempPar=temp.parentNode.parentNode,tempComp=tempPar.id,ans=parseInt(tempComp.substr(10)),TapMatchingApp.savedElements.push(temp.innerHTML),TapMatchingApp.savedAnswers.push(temp.parentNode.id),TapMatchingApp.qMatch[i]===TapMatchingApp.aMatch[ans]?TapMatchingApp.scoreEval.push(1):TapMatchingApp.scoreEval.push(0);"report"===TapMatchingApp.AppData.FeedbackType&&(TapMatchingApp.currentAttempts++,TapMatchingApp.onComplete(),TapMatchingApp.clearStage(),TapMatchingApp.buildReport())}},TapMatchingApp.checkIfAllAnswered=function(){"none"===TapMatchingApp.PostActivityText&&"none"===TapMatchingApp.PostActivityMedia||0===$(".tile-container")[0].children.length&&TapMatchingApp.buildPostQuiz()},TapMatchingApp.calculateScore=function(){var t=0;for(i=0;i<TapMatchingApp.questionData.length;i++)switch(TapMatchingApp.scoreEval[i]){case 1:t+=1;break;default:t=t}return t},TapMatchingApp.checkAnswers=function(){!0===TapMatchingApp.notifications&&PNotify.removeAll(),TapMatchingApp.evaluateScore(),!1===TapMatchingApp.mobileDevice&&(TapMatchingApp.checkCollapse=setInterval("TapMatchingApp.checkForCollapse();",100));var t=TapMatchingApp.calculateScore(),e=$(".wrong");$("#TAP_progress").html("You currently have "+t+" items in the correct category."),$("#TAP_progress").css("color","red");for(var a=0,p=0;p<TapMatchingApp.matchAmount.length;p++)a+=TapMatchingApp.matchAmount[p];t===a&&(TapMatchingApp.finishedQuiz=!0,"continuous"===TapMatchingApp.AppData.FeedbackType&&($("#TAP_resetWrongButton").remove(),$(TapMatchingApp.resetButton).hide().appendTo($("#TAP_buttonSet")).fadeIn(500)),$("#TAP_progress").html("Congratulations, you have successfully matched all "+TapMatchingApp.questionData.length+" scenarios with their correct approach. You are ready to proceed to the next topic in the course.")),TapMatchingApp.scoreEval=[],!1===TapMatchingApp.finishedQuiz&&"continuous"===TapMatchingApp.AppData.FeedbackType&&e.length>0&&(document.getElementById("TAP_resetWrongButton").disabled=!1,$("#TAP_resetWrongButton").fadeIn(500))},TapMatchingApp.checkAllAnswered=function(){if("report"===TapMatchingApp.AppData.FeedbackType&&void 0!==document.getElementById("TAP_checkButton")){for(var t=0,e=0;e<TapMatchingApp.matchAmount.length;e++)t+=TapMatchingApp.matchAmount[e];$(".dropzone .draggableTextNode").length>=t?(document.getElementById("TAP_checkButton").disabled=!1,$("#TAP_checkButton").fadeIn(500)):(document.getElementById("TAP_checkButton").disabled=!0,$("#TAP_checkButton").fadeOut(500))}},TapMatchingApp.checkForCollapse=function(){$(".draggableTextNode").each((function(){var t=this.id,e=t.substr(4,t.length);if("text"===TapMatchingApp.questionData[e].type&&!0===$(this.parentNode).hasClass("dropzone")){if(!0===$(this.firstChild).hasClass("TAP_expand"))$(this)[0].scrollWidth===parseInt($(this).innerWidth())&&!0===$(this).hasClass("collapsed")&&($(this.firstChild).remove(),$(this).removeClass("collapsed"),$(this).addClass("fullExpand"));else if($(this)[0].scrollWidth>parseInt($(this).innerWidth())||this.offsetHeight>28){var a=document.createElement("span");a.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>',$(a).addClass("TAP_expand"),$(a).click((function(){!0===$(this.parentNode).hasClass("collapsed")?($(this.parentNode).removeClass("collapsed"),$(a).addClass("expanded"),a.innerHTML='&#9660;<span class="sr-only">Collapse drag item</span>'):($(this.parentNode).addClass("collapsed"),$(a).removeClass("expanded"),a.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>')})),$(a).keyup((function(t){13===t.keyCode&&$(this).click()})),$(this).prepend(a),!0===$(this).hasClass("fullExpand")&&$(this).removeClass("fullExpand")}this.offsetHeight>28&&!1===$(this.firstChild).hasClass("expanded")&&$(this).addClass("collapsed")}!1===$(this.firstChild).hasClass("TAP_expand")&&$(this).addClass("fullExpand")}))},TapMatchingApp.checkForCollapse=function(){$(".draggableTextNode").not(":has(>.draggableImage)").each((function(){if(!0===$(this.parentNode).hasClass("dropzone")){if(!0===$(this.firstChild).hasClass("TAP_expand"))$(this)[0].scrollWidth===parseInt($(this).innerWidth())&&!0===$(this).hasClass("collapsed")&&($(this.firstChild).remove(),$(this).removeClass("collapsed"),$(this).addClass("fullExpand"));else if($(this)[0].scrollWidth>parseInt($(this).innerWidth())||this.offsetHeight>28){var t=document.createElement("span");t.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>',$(t).addClass("TAP_expand"),$(t).click((function(){!0===$(this.parentNode).hasClass("collapsed")?($(this.parentNode).removeClass("collapsed"),$(t).addClass("expanded"),t.innerHTML='&#9660;<span class="sr-only">Collapse drag item</span>'):($(this.parentNode).addClass("collapsed"),$(t).removeClass("expanded"),t.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>')})),$(t).keyup((function(t){13===t.keyCode&&$(this).click()})),$(this).prepend(t),!0===$(this).hasClass("fullExpand")&&$(this).removeClass("fullExpand")}this.offsetHeight>28&&!1===$(this.firstChild).hasClass("expanded")&&$(this).addClass("collapsed")}!1===$(this.firstChild).hasClass("TAP_expand")&&$(this).addClass("fullExpand")}))},TapMatchingApp.reset=function(){for(!0===TapMatchingApp.notifications&&PNotify.removeAll(),TapMatchingApp.ti=1,$(".correct").remove(),$(".wrong").remove(),TapMatchingApp.scoreEval=[],i=0;i<TapMatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),!0===$(temp).hasClass("dropped")&&($(temp).toggleClass("dropped"),$(temp).css("background-color","none")),!0===$(temp).hasClass("collapsed")&&$(temp).removeClass("collapsed"),!0===$(temp.firstChild).hasClass("TAP_expand")&&$(temp.firstChild).remove(),$(temp).hide().appendTo(TapMatchingApp.origPos[i]).fadeIn(500);$(".draggableTextNode").each((function(){this.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++})),$("#TAP_progress").html('Click the "Check Answers" button to check your progress.'),$("#TAP_progress").css("color","black"),TapMatchingApp.HandleMobileDrop(),"continuous"===TapMatchingApp.AppData.FeedbackType&&(TapMatchingApp.finishedQuiz=!1,$("#TAP_resetButton").fadeOut(500,(function(){$("#TAP_resetButton").remove()})),$("#TAP_buttonSet").append(TapMatchingApp.resetWrongButton),TapMatchingApp.sessionTimer=0,TapMatchingApp.currentAttempts++,TapMatchingApp.onComplete()),$("[tabindex=1]").focus()},TapMatchingApp.resetWrong=function(){for(TapMatchingApp.ti=1,TapMatchingApp.scoreEval=[],i=0;i<TapMatchingApp.questionData.length;i++){temp=document.getElementById("drag"+i);$(temp).children();!0===$(temp.firstChild).hasClass("TAP_expand")&&($(temp.firstChild).remove(),$(temp).removeClass("collapsed")),!0===$(temp.firstChild).hasClass("wrong")&&$(temp).hide().appendTo(TapMatchingApp.origPos[i]).fadeIn(500)}$(".draggableTextNode").each((function(){this.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++})),$(".wrong").remove(),document.getElementById("TAP_resetWrongButton").disabled=!0,$("#TAP_resetWrongButton").fadeOut(500),$("#TAP_progress").html('Click the "Check Answers" button to check your progress'),$("#TAP_progress").css("color","black"),TapMatchingApp.HandleMobileDrop(),$("[tabindex=1]").focus()},TapMatchingApp.setMobileSelect=function(t){var e;!0===TapMatchingApp.notifications&&PNotify.removeAll(),e=$(t.target.parentNode).hasClass("draggableTextNode")?t.target.parentNode:t.target,$(e.parentNode).hasClass("dropzone")?t.stopPropagation():(TapMatchingApp.EnterAccessDropMode(),!0===TapMatchingApp.mobileDevice&&TapMatchingApp.setHeight(),!1===TapMatchingApp.alreadySelected?(TapMatchingApp.alreadySelected=!0,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),null!==TapMatchingApp.AppData.DefaultSelectColor&&void 0!==TapMatchingApp.AppData.DefaultSelectColor&&"none"!==TapMatchingApp.AppData.DefaultSelectColor&&TapMatchingApp.AppData.DefaultSelectColor,e.setAttribute("aria-grabbed","true"),TapMatchingApp.initMobileSelect(e)):!0===$(e).hasClass("dragMe")?($(e).removeClass("dragMe"),$(e).css("border","thin solid #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","false"),TapMatchingApp.alreadySelected=!1,TapMatchingApp.HandleMobileDrop(),TapMatchingApp.ExitAccessDropMode()):(TapMatchingApp.HandleMobileDrop(),TapMatchingApp.alreadySelected=!1,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","true"),TapMatchingApp.alreadySelected=!0,TapMatchingApp.initMobileSelect(e)))},TapMatchingApp.initMobileSelect=function(t){temp=t.innerHTML;var e,a=t.lastChild.alt,p="";if(TapMatchingApp.selectedElements.push(temp),e=TapMatchingApp.selectedElements[0],p=TapMatchingApp.selectedElements[0],TapMatchingApp.droppedItem=p,void 0!==a&&(p=a,TapMatchingApp.droppedItem=p),null===document.getElementById("screenAlert")){var i=document.createElement("div");i.id="screenAlert",i.setAttribute("aria-live","assertive"),TapMatchingApp.containerRef.appendChild(i)}TapMatchingApp.ShowAccMessage("Selected: "+e),$("#screenAlert").html("Selected: "+p).focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3)},TapMatchingApp.HandleMobileDrop=function(t){var e="",a="";for(i=0;i<TapMatchingApp.selectedElements.length;i++)e+=i>0?", "+TapMatchingApp.selectedElements[i]:TapMatchingApp.selectedElements[i];""===e&&(e="none"),a=$(t).hasClass("dropzone")?"Dropped: "+TapMatchingApp.droppedItem+" into "+t.parentNode.firstChild.firstChild.innerHTML+" dropzone":"Dropped: "+TapMatchingApp.droppedItem,$("#screenAlert").html(a).focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3),TapMatchingApp.selectedElements=[];var p,n,c,s=$(".dragMe")[0];null!=t&&(p=t.parentNode.id,idNum=parseInt(p.substr(10)),n=TapMatchingApp.matchAmount[idNum],c=$(t).children().length+1);var o=[];if($.each($("#"+p+" .draggableTextNode"),(function(t,e){o.push(e.getAttribute("id"))})),void 0!==s&&$.inArray(s.getAttribute("id"),o)>-1)return!1;"match"===TapMatchingApp.ActivityType?$(t).is(":empty")&&($(t).append($(s)),TapMatchingApp.ExitAccessDropMode()):c<=n&&($(t).append($(s)),TapMatchingApp.ExitAccessDropMode()),c>n&&!0===TapMatchingApp.notifications&&new PNotify({text:$(t).attr("title")+" is full",type:"info"}),$(s).removeClass("dragMe"),$(s).removeClass("hover"),$(s).css("border","thin solid #D3D9E3"),null!=s&&(idNum=parseInt(s.id.substr(4)),$(s).attr("aria-grabbed","false"),s.removeAttribute("ondrop")),TapMatchingApp.HideAccMessage(),TapMatchingApp.alreadySelected=!1,TapMatchingApp.checkAllAnswered()},TapMatchingApp.initAccMAT=function(){$(TapMatchingApp.accMATCont+".draggableTextNode").keydown((function(t){$(t.target).hasClass("dropped")||(13===t.which?TapMatchingApp.setMobileSelect(t):46===t.which&&TapMatchingApp.revertKeyboard(this))}))},TapMatchingApp.ShowAccMessage=function(t){$("#AccMessageDisp").html(t),$("#AccMessageDisp").css("visibility","visible")},TapMatchingApp.HideAccMessage=function(){$("#AccMessageDisp").html(""),$("#AccMessageDisp").css("visibility","hidden")},TapMatchingApp.EnterAccessDropMode=function(){!0===TapMatchingApp.mobileDevice&&TapMatchingApp.setHeight(),$(".draggableTextNode").each((function(){!0===$(this.firstChild).hasClass("TAP_expand")&&(this.firstChild.setAttribute("tabindex","-1"),this.firstChild.setAttribute("aria-hidden","true")),this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")})),$(".TAP_button").each((function(){this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")})),ti=1,$(".dropzone").each((function(){this.setAttribute("tabindex",ti),ti++})),$(".dropzone").focus(TapMatchingApp.HandleAccessDropzoneFocus),$(".dropzone").blur(TapMatchingApp.HandleAccessDropzoneBlur)},TapMatchingApp.HandleAccessDropzoneBlur=function(){ansId=parseInt(this.parentNode.id.substr(10)),TapMatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",TapMatchingApp.HandleAccessDropRequest)},TapMatchingApp.HandleAccessDropzoneFocus=function(){ansId=parseInt(this.parentNode.id.substr(10)),TapMatchingApp.savedBackgrounds[ansId],$(this).keyup(TapMatchingApp.HandleAccessDropRequest),this.setAttribute("onclick","TapMatchingApp.HandleMobileDrop(this)")},TapMatchingApp.HandleAccessDropRequest=function(t){13===t.which&&($(this).click(),setTimeout((function(){TapMatchingApp.ExitAccessDropMode()}),200))},TapMatchingApp.ExitAccessDropMode=function(){TapMatchingApp.ti=1,$(".draggableTextNode").each((function(){!0===$(this.firstChild).hasClass("TAP_expand")&&(this.firstChild.setAttribute("tabindex",TapMatchingApp.ti),this.firstChild.setAttribute("aria-hidden","false"),TapMatchingApp.ti++),this.setAttribute("tabindex",TapMatchingApp.ti),this.setAttribute("aria-hidden","false"),TapMatchingApp.ti++})),TapMatchingApp.checkAnswersButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,"continuous"===TapMatchingApp.AppData.FeedbackType?(TapMatchingApp.resetWrongButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++):(TapMatchingApp.resetButton.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++),$("#TAP_instructions").attr("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,$(".TAP_button").each((function(){this.setAttribute("aria-hidden","false")})),$(".dropzone").unbind("focus",TapMatchingApp.HandleAccessDropzoneFocus),$(".dropzone").unbind("blur",TapMatchingApp.HandleAccessDropzoneBlur),$(".dropzone").each((function(){!1===TapMatchingApp.mobileDevice&&this.removeAttribute("onclick"),ansId=parseInt(this.parentNode.id.substr(10)),this.setAttribute("tabindex",-1),TapMatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",TapMatchingApp.HandleAccessDropRequest),this.blur()})),TapMatchingApp.HideAccMessage(),setTimeout((function(){$("[tabindex=1]").focus()}),100)},TapMatchingApp.touchDrag=function(t){!0===TapMatchingApp.mobileDevice&&TapMatchingApp.setHeight();var e=t.target,a=e.id,p=parseInt(a.substr(4,a.length)),i=TapMatchingApp.origPos[p];$(e).addClass("absolute"),i.appendChild(e);var n=t.targetTouches[0];e.style.left=n.pageX-$(e).width()/2+"px",e.style.top=n.pageY-$(e).height()/2+"px",t.preventDefault();var c=$("body").scrollLeft(),s=$("body").scrollTop();e.addEventListener("touchend",(function(t){var a,p,i,n=document.elementFromPoint(t.changedTouches[0].pageX-c,t.changedTouches[0].pageY-s);if($(e).removeClass("absolute"),e.removeAttribute("style"),n){var o=document.getElementById(n.id);"connect_box dropzone"===o.className?(a=n.parentNode.id,idNum=parseInt(a.substr(10)),p=TapMatchingApp.matchAmount[idNum],i=$(n).children().length+1,"match"===TapMatchingApp.ActivityType?$(o).is(":empty")&&(n.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):i<=p&&(n.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4)))):"connect_box dropzone"===o.parentNode.className&&(a=n.parentNode.parentNode.id,idNum=parseInt(a.substr(10)),p=TapMatchingApp.matchAmount[idNum],i=$(n.parentNode).children().length+1,"match"===TapMatchingApp.ActivityType?$(o.parentNode).is(":empty")&&(n.parentNode.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):i<=p&&(n.parentNode.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))))}!0===$("#TAP_iToggle").hasClass("iDown")&&$("#TAP_iToggle").click(),TapMatchingApp.checkAllAnswered()}))},TapMatchingApp.EmbedMedia=function(t,e){var a,p,i=document.createElement("div");switch(i.setAttribute("class","TAP_Media"),e.type){case"link":(p=document.createElement("a")).setAttribute("class","TAP_MediaLink"),p.setAttribute("href",e.src),p.setAttribute("target","_blank"),p.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,e.description?p.innerHTML=e.description:p.innerHTML="Link",i.appendChild(p);break;case"image":"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink&&((a=document.createElement("a")).setAttribute("class","TAP_MediaImage"),a.setAttribute("href",e.mediaLink),a.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,a.setAttribute("target","_blank")),p=document.createElement("img"),"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink||p.setAttribute("class","TAP_MediaImage"),p.setAttribute("src",e.src),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width?p.setAttribute("width",e.width):p.setAttribute("width","420"),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height?p.setAttribute("height",e.height):p.setAttribute("height","315"),i.setAttribute("style","text-align:center;"),e.description&&p.setAttribute("alt",e.description),"none"===e.mediaLink||null===e.mediaLink||void 0===e.mediaLink||""===e.mediaLink?i.appendChild(p):(a.appendChild(p),i.appendChild(a));break;case"YouTubeVideo":(validSrc=TapMatchingApp.validateYouTubeLink(e.src))&&((p=document.createElement("iframe")).setAttribute("class","TAP_MediaEmbeddedVideo"),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width?p.setAttribute("width",e.width):p.setAttribute("width","420"),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height?p.setAttribute("height",e.height):p.setAttribute("height","315"),p.setAttribute("frameborder","0"),p.setAttribute("allowfullscreen","true"),p.setAttribute("src",validSrc),i.setAttribute("style","text-align:center;"),e.description&&p.setAttribute("alt",e.description),i.appendChild(p),(a=document.createElement("a")).setAttribute("class","TAP_MediaAltLink"),a.setAttribute("href",e.altLink),a.setAttribute("tabindex",TapMatchingApp.ti),TapMatchingApp.ti++,a.setAttribute("target","_blank"),a.innerHTML="Alternate Link.",i.appendChild(a));break;case"text":(p=document.createElement("p")).setAttribute("class","TAP_MediaText"),p.setAttribute("target","_blank"),p.innerHTML=e.content,i.appendChild(p)}$(i).hide().appendTo(t).fadeIn(500)},TapMatchingApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")&&(-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")&&"https://www.youtube.com/embed/"+(code=t.slice(t.indexOf("?v=")+3)):-1!==t.indexOf("https://www.youtube.com/embed/")&&t.slice(t.indexOf("src")+5,t.indexOf('"',t.indexOf("src")+5)))},TapMatchingApp.timer=function(){TapMatchingApp.sessionTimer++},TapMatchingApp.setHeight=function(){if(!1===TapMatchingApp.heightSet&&!0===TapMatchingApp.mobileDevice){var t=$("#qColum_1").height();$("#TAP_qColContainer").css("min-height",t+20+"px"),TapMatchingApp.heightSet=!0}},TapMatchingApp.onComplete=function(){},$.fn.extend({animateCss:function(t,e){return this.addClass("animated "+t).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){$(this).removeClass("animated "+t),e&&e()})),this}});