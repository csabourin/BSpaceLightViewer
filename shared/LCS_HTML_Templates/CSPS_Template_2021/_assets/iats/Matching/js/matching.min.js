var MAT_appContainer,MAT_buttonIcon,MAT_preQuizText,MAT_postQuizText,slotBackground,temp,tempPar,tempComp,ans,ansId,data,code,questionFile,idNum,tempArr,ti,validSrc,c,i,j,k,MatchingApp={mobileDevice:!1,ActivityType:null,AppData:null,currentAttempts:0,sessionTimer:0,timerInterval:null,ti:0,containerRef:null,hLightingEffect:!1,qCols:1,curQCol:1,accMATCont:"div",questionData:null,AnsSlotData:null,alreadySelected:!1,heightSet:!1,finishedQuiz:!1,allAnswered:!1,disableDragging:!1,interval:null,headingLevel:null,continueButton:null,checkAnswersButton:null,resetWrongButton:null,resetButton:null,restartButton:null,submitButton:null,postQuizButton:null,instructionButton:null,droppedItem:null,notifications:!0,origPos:[],aMatch:[],qMatch:[],matchAmount:[],selectedElements:[],scoreEval:[],savedElements:[],savedAnswers:[],savedCorrectAnswers:[],savedBackgrounds:[],savedBackgroundColors:[],lineHeightNoBorders:null,lineHeightWithBorders:null,mobileDragging:!1,score:0,SCORMConnectionAttempts:0,SCORMEnabled:!1,SCORMConnected:!1,SCORMConnectionInterval:null,SCORMSession:null,SCORMInteraction:null,dropzoneHeight:0,dropzoneBackground:null},D2LDEBUG=!0;function d2log(t){void 0!==D2LDEBUG&&D2LDEBUG&&console.log(t)}MatchingApp.resetQuizData=function(){MatchingApp.sessionTimer=0,MatchingApp.alreadySelected=!1,MatchingApp.heightSet=!1,MatchingApp.finishedQuiz=!1,MatchingApp.allAnswered=!1,MatchingApp.interval=null,MatchingApp.origPos=[],MatchingApp.aMatch=[],MatchingApp.qMatch=[],MatchingApp.matchAmount=[],MatchingApp.selectedElements=[],MatchingApp.scoreEval=[],MatchingApp.savedElements=[],MatchingApp.savedAnswers=[],MatchingApp.savedCorrectAnswers=[]},MatchingApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(MatchingApp.containerRef=document.getElementById(e),MatchingApp.containerID=e,MatchingApp.getAppData(MatchingApp.buildApp)):d2log("ERROR: Missing specified DOM object in MatchingApp.setupApp().")},MatchingApp.getAppData=function(t){""===questionFile?window.useActivityData?(MatchingApp.AppData=window.useActivityData,t(MatchingApp.AppData)):d2log("ERROR: Could not resolve json data."):$.getJSON(questionFile,(function(e){MatchingApp.AppData=e,t(MatchingApp.AppData)})).fail((function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)}))},MatchingApp.buildApp=function(){MatchingApp.parseData(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(MatchingApp.mobileDevice=!0),MatchingApp.questionData=MatchingApp.AppData.QuestionNodes,MatchingApp.AnsSlotData=MatchingApp.AppData.AnswerNodes,MatchingApp.ActivityType=MatchingApp.AppData.ActivityType,null!==MatchingApp.AppData.DefaultColor&&void 0!==MatchingApp.AppData.DefaultColor&&""!==MatchingApp.AppData.DefaultColor&&"none"!==MatchingApp.AppData.DefaultColor||(MatchingApp.AppData.DefaultColor="#FFFFFF"),null!==MatchingApp.AppData.DefaultSelectColor&&void 0!==MatchingApp.AppData.DefaultSelectColor&&""!==MatchingApp.AppData.DefaultSelectColor&&"none"!==MatchingApp.AppData.DefaultSelectColor||(MatchingApp.AppData.DefaultSelectColor="#B7E5E5"),null!==MatchingApp.AppData.DefaultHighlightColor&&void 0!==MatchingApp.AppData.DefaultHighlightColor&&""!==MatchingApp.AppData.DefaultHighlightColor&&"none"!==MatchingApp.AppData.DefaultHighlightColor||(MatchingApp.AppData.DefaultHighlightColor="#C6C8CA"),MatchingApp.AppData.DefaultColor="#FFFFFF",MatchingApp.qCols=parseInt(MatchingApp.AppData.Advanced.QuestionColumns),MatchingApp.qCols>MatchingApp.questionData.length&&(MatchingApp.qCols=MatchingApp.questionData.length),MatchingApp.hLightingEffect=!0,MatchingApp.headingLevel=parseInt(MatchingApp.AppData.Advanced.HeadingLevel),null===MatchingApp.headingLevel||void 0===MatchingApp.headingLevel||"none"===MatchingApp.headingLevel||isNaN(MatchingApp.headingLevel)||""===MatchingApp.headingLevel?MatchingApp.headingLevel=1:MatchingApp.headingLevel>3&&(MatchingApp.headingLevel=3),MatchingApp.buildAppFrame(),MatchingApp.loadButtons(),MatchingApp.AppData.SCORMEnabled?(MatchingApp.SCORMEnabled=MatchingApp.AppData.SCORMEnabled,MatchingApp.SCORMEnabled&&MatchingApp.establishScorm()):MatchingApp.startActivity()},MatchingApp.startActivity=function(){if(void 0===window.startLocation)!("none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText||"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia&&0!==MatchingApp.AppData.PreActivityMedia.length)?MatchingApp.buildActivity():MatchingApp.buildPreQuiz();else switch(window.startLocation){case 0:case 1:MatchingApp.buildPreQuiz();break;case 2:MatchingApp.buildActivity();break;case 3:MatchingApp.buildPostQuiz()}$(MatchingApp.containerRef).addClass("rs_preserve");try{PNotify.removeAll()}catch(t){MatchingApp.notifications=!1}},MatchingApp.autoSelect=function(t){if("Microsoft Internet Explorer"===navigator.appName){document.selection.empty();var e=document.body.createTextRange();e.moveToElementText(t),e.select()}},MatchingApp.buildAppFrame=function(){var t=document.createElement("section");t.id="MAT_container";var e=document.createElement("section");e.id="MAT_content";var n=document.createElement("section");n.id="MAT_header",n.innerHTML="<h"+MatchingApp.headingLevel+">"+MatchingApp.AppData.ActivityName+"</h"+MatchingApp.headingLevel+">",t.appendChild(e),$(t).appendTo(MatchingApp.containerRef),$("<div/>",{id:"AccMessageDisp",class:"AccMessage",text:"Stuff"}).appendTo("body"),(MAT_appContainer=document.createElement("div")).id="MAT_appContainer",MAT_appContainer.setAttribute("role","main"),$(n).hide().appendTo(e).slideDown(500,"swing"),e.appendChild(MAT_appContainer)},MatchingApp.loadButtons=function(){(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon");var t=document.createElement("button");t.id="MAT_checkButton",t.setAttribute("class","MAT_button"),t.setAttribute("title","Checks the Answers"),t.onclick=function(){MatchingApp.SCORMEnabled&&MatchingApp.sendButtonEvent("Checked answers."),MatchingApp.checkAnswers()};var e=document.createElement("span");e.setAttribute("class","MAT_buttonLabel"),e.innerHTML="Check Answers",t.appendChild(e),MatchingApp.checkAnswersButton=t,(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon");var n=document.createElement("button");n.id="MAT_resetWrongButton",n.setAttribute("class","MAT_button"),n.setAttribute("title","Resets the Wrong Draggable Items"),n.onclick=function(){MatchingApp.disableDragging=!1,MatchingApp.SCORMEnabled&&MatchingApp.sendButtonEvent("Reset wrong answers."),MatchingApp.resetWrong()};var i=document.createElement("span");i.setAttribute("class","MAT_buttonLabel"),i.innerHTML="Reset Wrong",n.appendChild(i),n.disabled=!0,MatchingApp.resetWrongButton=n,(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon");var a=document.createElement("button");a.id="MAT_resetButton",a.setAttribute("class","MAT_button"),a.setAttribute("title","Resets All the Draggable Items"),a.onclick=function(){MatchingApp.disableDragging=!1,MatchingApp.SCORMEnabled&&MatchingApp.sendButtonEvent("Reset all answers."),MatchingApp.reset()};var p=document.createElement("span");p.setAttribute("class","MAT_buttonLabel"),p.innerHTML="Reset Answers",a.appendChild(p),MatchingApp.resetButton=a,(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon");var c=document.createElement("button");c.id="MAT_restartButton",c.setAttribute("class","MAT_button"),c.setAttribute("title","Restarts the Activity"),c.onclick=function(){MatchingApp.disableDragging=!1,document.getElementById("MAT_checkButton")&&(document.getElementById("MAT_checkButton").disabled=!1),MatchingApp.SCORMEnabled&&(MatchingApp.sendButtonEvent("Restarted activity."),MatchingApp.SCORMSession=new SCORMSession(MatchingApp.AppData.ActivityID),MatchingApp.SCORMInteraction=new SCORMInteraction(MatchingApp.SCORMSession)),MatchingApp.clearStage(),MatchingApp.resetQuizData(),!("none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText||"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia)?MatchingApp.buildActivity():MatchingApp.buildPreQuiz(),MatchingApp.GoToTop()};var o=document.createElement("span");o.setAttribute("class","MAT_buttonLabel"),o.innerHTML="Restart Activity",c.appendChild(o),MatchingApp.restartButton=c;var s=document.createElement("button");s.id="MAT_continueButton",s.setAttribute("class","MAT_button"),s.onclick=function(){MatchingApp.disableDragging=!1,MatchingApp.clearStage(),MatchingApp.buildActivity(),MatchingApp.timerInterval=setInterval(MatchingApp.timer,1e3),MatchingApp.GoToTop()};var r=document.createElement("span");r.setAttribute("class","MAT_buttonLabel"),s.setAttribute("title","Starts the Activity"),r.innerHTML="Start Activity",s.appendChild(r),MatchingApp.continueButton=s,(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon");var l=document.createElement("button");l.id="MAT_postQuizButton",l.setAttribute("class","MAT_button"),l.setAttribute("title","Finishes the Activity"),l.onclick=function(){MatchingApp.SCORMEnabled&&MatchingApp.sendButtonEvent("Finished activity."),MatchingApp.clearStage(),MatchingApp.buildPostQuiz(),MatchingApp.GoToTop()};var A=document.createElement("span");A.setAttribute("class","MAT_buttonLabel"),A.innerHTML="Continue",l.appendChild(A),MatchingApp.postQuizButton=l,(MAT_buttonIcon=document.createElement("div")).setAttribute("class","MAT_buttonIcon"),MAT_buttonIcon.setAttribute("style","margin:0px auto;")},MatchingApp.buildPreQuiz=function(){if(MatchingApp.ti=0,"none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText&&((MAT_preQuizText=document.createElement("p")).id="MAT_preQuizText",MAT_preQuizText.innerHTML=MatchingApp.AppData.PreActivityText,$(MAT_preQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)),"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia)for(i=0;i<MatchingApp.AppData.PreActivityMedia.length;i++)MatchingApp.EmbedMedia(MAT_appContainer,MatchingApp.AppData.PreActivityMedia[i]);MatchingApp.buildPreQuizButtons(),MatchingApp.editorFallback()},MatchingApp.buildPreQuizButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",$(t).hide().appendTo(MAT_appContainer).fadeIn(500),t.appendChild(MatchingApp.continueButton),MatchingApp.continueButton.setAttribute("tabindex",MatchingApp.ti)},MatchingApp.buildPostQuiz=function(){if(MatchingApp.ti=0,"none"!==MatchingApp.AppData.PostActivityText&&null!==MatchingApp.AppData.PostActivityText&&void 0!==MatchingApp.AppData.PostActivityText&&""!==MatchingApp.AppData.PostActivityText?((MAT_postQuizText=document.createElement("p")).id="MAT_postQuizText",MAT_postQuizText.innerHTML=MatchingApp.AppData.PostActivityText,$(MAT_postQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)):((MAT_postQuizText=document.createElement("p")).id="MAT_postQuizText",MAT_postQuizText.innerHTML="You have completed the activity!",$(MAT_postQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)),"none"!==MatchingApp.AppData.PostActivityMedia&&null!==MatchingApp.AppData.PostActivityMedia&&void 0!==MatchingApp.AppData.PostActivityMedia&&""!==MatchingApp.AppData.PostActivityMedia)for(i=0;i<MatchingApp.AppData.PostActivityMedia.length;i++)MatchingApp.EmbedMedia(MAT_appContainer,MatchingApp.AppData.PostActivityMedia[i]);MatchingApp.buildPostQuizButtons(),MatchingApp.editorFallback(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildPostQuizButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",MAT_appContainer.appendChild(t),t.appendChild(MatchingApp.restartButton),MatchingApp.restartButton.setAttribute("tabindex",MatchingApp.ti)},MatchingApp.buildActivity=function(){for(MatchingApp.score=0,MatchingApp.ti=0,i=0;i<MatchingApp.questionData.length;i++)MatchingApp.origPos.push(null),temp=MatchingApp.questionData[i].answer,MatchingApp.qMatch.push(temp);for(j=0;j<MatchingApp.AnsSlotData.length;j++){temp=MatchingApp.AnsSlotData[j].key,MatchingApp.aMatch.push(temp);var t=0;for(k=0;k<MatchingApp.questionData.length;k++)MatchingApp.questionData[k].answer===MatchingApp.AnsSlotData[j].key&&t++;MatchingApp.matchAmount.push(t)}MatchingApp.buildInstructions(),MatchingApp.buildQuestionCols(),MatchingApp.buildAnswerSlots(),MatchingApp.buildScrollZones(),MatchingApp.buildActivityButtons(),MatchingApp.initAccMAT(),MatchingApp.assignOrigPos(),"report"===MatchingApp.AppData.FeedbackType&&(document.getElementById("MAT_checkButton").disabled=!0,$("#MAT_checkButton").hide()),$("#MAT_instructions").attr("tabindex",MatchingApp.ti),MatchingApp.mobileDevice;var e=parseInt($("#drag0").css("line-height")),n=parseInt($("#drag0").css("padding-top")),a=parseInt($("#drag0").css("padding-bottom")),p=parseInt($("#drag0").css("border-top-width")),c=parseInt($("#drag0").css("border-bottom-width"));MatchingApp.lineHeightNoBorders=e+n+a,MatchingApp.lineHeightWithBorders=MatchingApp.lineHeightNoBorders+p+c},MatchingApp.buildActivityButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",$(t).hide().appendTo(MAT_appContainer).fadeIn(500),t.appendChild(MatchingApp.checkAnswersButton),MatchingApp.checkAnswersButton.setAttribute("tabindex",MatchingApp.ti),"continuous"===MatchingApp.AppData.FeedbackType?(t.appendChild(MatchingApp.resetWrongButton),$("#MAT_resetWrongButton").hide(),MatchingApp.resetWrongButton.setAttribute("tabindex",MatchingApp.ti)):(t.appendChild(MatchingApp.resetButton),MatchingApp.resetButton.setAttribute("tabindex",MatchingApp.ti))},MatchingApp.buildReport=function(){MatchingApp.ti=0,MatchingApp.findCorrectAnswers();var t=MatchingApp.calculateScore(),e=document.createElement("div");e.id="MAT_report";var n=document.createElement("h"+(MatchingApp.headingLevel+1));n.setAttribute("class","MAT_resultsHeader");for(var i=0,a=0;a<MatchingApp.matchAmount.length;a++)i+=MatchingApp.matchAmount[a];for(n.innerHTML="You scored "+t+"/"+i+"!",e.appendChild(n),a=0;a<MatchingApp.AnsSlotData.length;a++)if(MatchingApp.matchAmount[a]>0){var p=document.createElement("div");p.setAttribute("class","MAT_miniReport");var c=document.createElement("h"+(MatchingApp.headingLevel+3));c.setAttribute("class","MAT_dropzoneHeader"),c.innerHTML=MatchingApp.AnsSlotData[a].title,p.appendChild(c),e.appendChild(p);var o=document.createElement("div");for(o.setAttribute("class","MAT_miniReportContent"),p.appendChild(o),j=0;j<MatchingApp.savedElements.length;j++)if(MatchingApp.AnsSlotData[a].key===MatchingApp.savedAnswers[j]){var s=document.createElement("li"),r=document.createElement("div");switch($(r).addClass("MAT_feedback"),MatchingApp.scoreEval[j]){case 1:s.innerHTML=MatchingApp.savedElements[j],o.appendChild(s),$(s).prepend('<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOTZFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5NEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5NUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqYsgfwAAAFBSURBVHjaYvz//z8DLQETw5ADW/w7wBgKGKluOANDOZTXyeCzsYKRioY3AMl6NNEGZioZXgEkm7HIPGOkkuHtWGSWAXEcI4WGZwLJaVhkNgNxCDAOfjHS0nDyU9EW/0QgOQ+LzG4g9oEZTp4FW/yjgeQiLJl0P9Twb8iCjGgagUo2LqWW4QgLtvj7Ack1UDFQ+G3CYjhMDSuazCkgdgPq+YjNTYxYNP7GsIRMw2GFXS2aRlawYVv83aCGu+Ew/BIhw2E+EAXS+4BYB03uOxA3AXEdEHOiyV0BYieg4a8JpQlYHOCyBBsg2nD0VCQDJA8AsTIe9XeB2B5o+FPSKxyfjU+ApAPUEFyGO5BiOPaMBvHJCSCWRhIFWW4JdQSFVSbCJzCXgmhHcgzHXSf7bLwDteQkNFjukFsmMg75VgVAgAEAWmBzHcug4yIAAAAASUVORK5CYII=" alt="right check mark" disabled/>'),"none"!==MatchingApp.questionData[j].correct&&null!==MatchingApp.questionData[j].correct&&void 0!==MatchingApp.questionData[j].correct&&""!==MatchingApp.questionData[j].correct&&(r.innerHTML="<strong>Feedback: </strong>"+MatchingApp.questionData[j].correct,o.appendChild(r));break;default:s.innerHTML=MatchingApp.savedElements[j],o.appendChild(s),$(s).prepend('<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMUNFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjlENkQxOUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxQUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr+MFuwAAADiSURBVHjaxJY9DsIwDIXtHoCJkY1DdO2AWHuPHqj36IoYujJwBDZGJk7AM3KWoEa2JQtLr6na5Hup81cijRedeugOHSgY0lYZfXnGBY7iAu2gBzTs6fr0wlGs0BF6Q2cwblzBS7hMKniJr0mHy1zBSSuulnRtwEmZsxiM2mPymjTgJQsjGyv+pMvahr0NvHXZ2yu9N38tB/JKnlRyYPDICt80cJo01wwH57h5QXaUHP9JUeogp07T1IWWulWkbnYRuMdE1sESgUvou6FxnixiMOnx5oIbTIQ5pR/6lP3b8hFgAJ82ro/bie6BAAAAAElFTkSuQmCC" alt="wrong x" disabled/>'),"none"!==MatchingApp.questionData[j].wrong&&null!==MatchingApp.questionData[j].wrong&&void 0!==MatchingApp.questionData[j].wrong&&""!==MatchingApp.questionData[j].wrong&&(r.innerHTML="<strong>Feedback: </strong>"+MatchingApp.questionData[j].wrong,o.appendChild(r))}}}$(".MI_qColum").hide(),$("#MAT_qColContainer").append($(e)),$(e).hide().fadeIn(500),$(".MAT_expand").remove(),$("#MAT_ansSlotContainer").addClass("MAT_answers_lg"),$("#MAT_qColContainer").css("float","right"),$("#MAT_ansSlotContainer").css("float","left"),void 0===window.startLocation&&MatchingApp.buildReportButtons(),MatchingApp.GoToTop(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildReportButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",MAT_appContainer.appendChild(t),t.appendChild(MatchingApp.postQuizButton),MatchingApp.postQuizButton.setAttribute("tabindex",MatchingApp.ti),t.appendChild(MatchingApp.restartButton),MatchingApp.restartButton.setAttribute("tabindex",MatchingApp.ti)},MatchingApp.clearStage=function(){$("#MAT_appContainer").empty(),clearInterval(MatchingApp.interval),MatchingApp.GoToTop()},MatchingApp.findCorrectAnswers=function(){for(i=0;i<MatchingApp.questionData.length;i++)for(j=0;j<MatchingApp.AnsSlotData.length;j++)MatchingApp.questionData[i].answer===MatchingApp.AnsSlotData[j].key&&MatchingApp.savedCorrectAnswers.push(MatchingApp.AnsSlotData[j].title)},MatchingApp.toggleInstructions=function(){},MatchingApp.buildScrollZones=function(){var t=document.createElement("div");t.id="MAT_upperScrollZone",t.className="MAT_scrollZone",t.innerHTML="<p id='MAT_upperScrollZoneLabel'>Drag element here to scroll up</p>",$(t).hide().insertBefore($("#MAT_qColContainer"));var e=document.createElement("div");e.id="MAT_lowerScrollZone",e.className="MAT_scrollZone",e.innerHTML="<p id='MAT_lowerScrollZoneLabel'>Drag element here to scroll down</p>",$(e).hide().appendTo($("#MAT_appContainer"))},MatchingApp.ShowScrollZones=function(t){if(window.top.location.href.indexOf("viewContent")>-1){var e=window.parent.document.getElementsByTagName("iframe")[0].offsetTop;window.top.scrollY-e>0?$("#MAT_upperScrollZone").css("top",window.top.scrollY-e):$("#MAT_upperScrollZone").css("top",0),parseInt(t.style.top)+t.offsetHeight/2<$("#MAT_content").height()?$("#MAT_lowerScrollZone").css("top",window.top.innerHeight-e-$("#MAT_lowerScrollZone").height()+window.top.scrollY):$("#MAT_lowerScrollZone").css("top",$("#MAT_content").height()-$("#MAT_lowerScrollZone").height()),$("#MAT_upperScrollZone").fadeIn(200),$("#MAT_lowerScrollZone").fadeIn(200)}},MatchingApp.HideScrollZones=function(){$("#MAT_upperScrollZone").fadeOut(200),$("#MAT_lowerScrollZone").fadeOut(200)},MatchingApp.StartScrollZoneScroll=function(t){var e;MatchingApp.ZoneScrolling||($("#MAT_lowerScrollZone").innerHTML="active",e="up"===t?-10:10,window.clearInterval(MatchingApp.ScrollTimer),MatchingApp.ZoneScrolling=!0,MatchingApp.ScrollTimer=window.setInterval((function(){window.top.scrollY+e<$(document).height()&&window.top.scrollTo(0,window.top.scrollY+e)}),50))},MatchingApp.EndScrollZoneScroll=function(){MatchingApp.ZoneScrolling&&(window.clearInterval(MatchingApp.ScrollTimer),MatchingApp.ZoneScrolling=!1)},MatchingApp.buildQuestionCols=function(){var t,e=document.createElement("div");for(e.id="MAT_qColContainer",e.className="MAT_questions",e.setAttribute("ondrop","MatchingApp.revert(event);"),e.setAttribute("ondragover","MatchingApp.allowRevert(event);"),!0===MatchingApp.AppData.Advanced.HorizontalAlignment&&($(e).css("width","48%"),$(e).css("float","left"),$(e).css("display","block")),$(e).hide().appendTo(MAT_appContainer).fadeIn(500),c=0;c<MatchingApp.qCols;c++){var n=$("<div/>",{id:"qColum_"+(c+1),style:"width: "+100/MatchingApp.qCols+"%;",class:"MI_qColum"});$("<div/>",{id:"unsorted_"+(c+1),class:"MAT_qCol"}).appendTo(n),$("#MAT_qColContainer").append(n)}for(tempArr=[],i=0;i<MatchingApp.questionData.length;i++)"text"===MatchingApp.questionData[i].type&&(""===MatchingApp.questionData[i].question&&(MatchingApp.questionData[i].question="Sample Drag Item"),t=MatchingApp.questionData[i].centerText?' class="draggableTextNode centerAlign"':' class="draggableTextNode"',!0===MatchingApp.mobileDevice?tempArr[i]='<div id="drag'+i+'" "'+t+'" >'+MatchingApp.questionData[i].question+"</div>":tempArr[i]='<div id="drag'+i+'" draggable="true" aria-hidden="false" aria-grabbed="false" ondragstart="MatchingApp.drag(event);" ondrop="MatchingApp.drop(event);" onmousedown="MatchingApp.autoSelect(this);" onmouseover="MatchingApp.hLightEffect(this, true)" onmouseout="MatchingApp.hLightEffect(this, false)" onfocus="MatchingApp.hLightEffect(this, true)" onblur="MatchingApp.hLightEffect(this, false)"'+t+'" >'+MatchingApp.questionData[i].question+"</div>"),"image"===MatchingApp.questionData[i].type&&(MatchingApp.questionData[i].centerText?t+=' class="draggableTextNode centerAlign"':t+=' class="draggableTextNode"',!0===MatchingApp.mobileDevice?tempArr[i]='<div id="drag'+i+'" ontouchmove="MatchingApp.touchDrag(event);"'+t+'" ><img class="draggableImage" src="'+MatchingApp.questionData[i].src+'" alt="'+MatchingApp.questionData[i].alt+'"/></div>':tempArr[i]='<div id="drag'+i+'" draggable="true" aria-hidden="false" aria-grabbed="false" ondragstart="MatchingApp.drag(event);" ondrop="MatchingApp.drop(event);" onmousedown="MatchingApp.autoSelect(this);" onmouseover="MatchingApp.hLightEffect(this, true)" onmouseout="MatchingApp.hLightEffect(this, false)" onfocus="MatchingApp.hLightEffect(this, true)" onblur="MatchingApp.hLightEffect(this, false)"'+t+'" > <img class="draggableImage" src="'+MatchingApp.questionData[i].src+'" alt="'+MatchingApp.questionData[i].alt+'"/></div>'),"both"===MatchingApp.questionData[i].type&&(!0===MatchingApp.mobileDevice?tempArr[i]='<div id="drag'+i+'" " class="draggableTextNode centerAlign" > <img class="draggableImage" src="'+MatchingApp.questionData[i].img.src+'" alt="'+MatchingApp.questionData[i].img.alt+'"/><p>'+MatchingApp.questionData[i].question+"</p></div>":(tempArr[i]='<div id="drag'+i+'" draggable="true" aria-hidden="false" aria-grabbed="false" ondragstart="MatchingApp.drag(event);" ondrop="MatchingApp.drop(event);" onmousedown="MatchingApp.autoSelect(this);" onmouseover="MatchingApp.hLightEffect(this, true)" onmouseout="MatchingApp.hLightEffect(this, false)" onfocus="MatchingApp.hLightEffect(this, true)" onblur="MatchingApp.hLightEffect(this, false)" class="draggableTextNode centerAlign',tempArr[i]+='" > <img class="draggableImage" src="'+MatchingApp.questionData[i].img.src+'" alt="'+MatchingApp.questionData[i].img.alt+'"/><p',MatchingApp.questionData[i].centerText?tempArr[i]+=' class="centerAlign"':tempArr[i]+=' class="leftAlign"',tempArr[i]+=">"+MatchingApp.questionData[i].question+"</p></div>")),null!==MatchingApp.questionData[i].color&&void 0!==MatchingApp.questionData[i].color&&"none"!==MatchingApp.questionData[i].color&&""!==MatchingApp.questionData[i].color?(MatchingApp.questionData[i].color,slotBackground=MatchingApp.AppData.DefaultColor,MatchingApp.savedBackgroundColors.splice(i,1,slotBackground)):(slotBackground=MatchingApp.AppData.DefaultColor,MatchingApp.savedBackgroundColors.splice(i,1,slotBackground));for(!0===MatchingApp.AppData.Randomize&&tempArr.sort((function(){return.5-Math.random()})),j=0;j<MatchingApp.questionData.length;j++)MatchingApp.curQCol>MatchingApp.qCols&&(MatchingApp.curQCol=1),$("#unsorted_"+MatchingApp.curQCol).append(tempArr[j]),MatchingApp.curQCol++;$(".draggableTextNode").each((function(){this.setAttribute("tabindex",MatchingApp.ti),idNum=parseInt(this.id.substr(4))})),MatchingApp.curQCol=1},MatchingApp.buildAnswerSlots=function(){var t=document.createElement("div");for(t.id="MAT_ansSlotContainer",t.className="MAT_answers",!0===MatchingApp.AppData.Advanced.HorizontalAlignment&&($(t).css("width","50%"),$(t).css("float","right"),$(t).css("display","block")),$(t).hide().appendTo(MAT_appContainer).fadeIn(500),c=0;c<MatchingApp.AnsSlotData.length;c++)if(MatchingApp.matchAmount[c]>0){var e;MatchingApp.AnsSlotData[c].color,"#9EA5A9","none"!==MatchingApp.AnsSlotData[c].src&&null!==MatchingApp.AnsSlotData[c].src&&void 0!==MatchingApp.AnsSlotData[c].src&&""!==MatchingApp.AnsSlotData[c].src?(slotBackground=MatchingApp.AnsSlotData[c].src,MatchingApp.savedBackgrounds[c]=slotBackground,e="background: url("+slotBackground+") repeat;"):(MatchingApp.savedBackgrounds[c]="none",e="");var n=$("<div/>",{id:"aSlotCont_"+c,class:"MI_aSlot",ondrop:"MatchingApp.drop(event)",ondragover:"MatchingApp.allowDrop(event)"}),i=$("<div/>",{id:MatchingApp.AnsSlotData[c].key+"_title",class:"dzTitle"}).appendTo(n);""===MatchingApp.AnsSlotData[c].title&&(MatchingApp.AnsSlotData[c].title="Sample Dropzone"),"sort"===MatchingApp.ActivityType?$("<h"+(MatchingApp.headingLevel+1)+"/>").html(MatchingApp.AnsSlotData[c].title+" ("+MatchingApp.matchAmount[c]+")").appendTo(i):$("<h"+(MatchingApp.headingLevel+1)+"/>").html(MatchingApp.AnsSlotData[c].title).appendTo(i),$("<div/>",{id:MatchingApp.AnsSlotData[c].key,class:"connect_box dropzone",title:MatchingApp.AnsSlotData[c].title+" dropzone",style:e}).appendTo(n),$("#MAT_ansSlotContainer").append(n);const t=document.querySelector(".dropzone").offsetHeight,a=window.getComputedStyle(document.querySelector(".dropzone"),null).getPropertyValue("background");MatchingApp.dropzoneHeight=t,MatchingApp.dropzoneBackground=a,!0===MatchingApp.mobileDevice&&$(".dropzone").each((function(){this.setAttribute("onclick","MatchingApp.HandleMobileDrop(this)")}))}!0===MatchingApp.AppData.Advanced.HorizontalAlignment&&$(".MI_aSlot").css("width","100%")},MatchingApp.buildInstructions=function(){var t,e=document.createElement("div");e.id="MAT_activityText",t=!0===MatchingApp.mobileDevice?"match"===MatchingApp.ActivityType?"report"===MatchingApp.AppData.FeedbackType?'Match each item to the appropriate category. Tap on "Check Answers" to see your results.':'Match each item to the appropriate category. Tap on "Check Answers" to see your progress.':"report"===MatchingApp.AppData.FeedbackType?'Sort each item into the appropriate category. Tap on "Check Answers" to see your results.':'Sort each item into to the appropriate category. Tap on "Check Answers" to see your progress.':(MatchingApp.ActivityType,MatchingApp.AppData.FeedbackType,'<span class="MAT_instructionText">Sort each item into the appropriate category by dragging the option into the dropzone (computer users) or by selecting the option and then selecting the dropzone (users on smaller screens or mobile). For keyboard only users, use the tab key to select an option from the list and use the enter key to select it. Use tab again to select the correct dropzone and then hit the enter key to place the option in that dropzone. Select an option and hit the delete key to return it to its original position. Use the "Check Answers" button to get your results.</span>'),"none"!==MatchingApp.AppData.Instructions&&null!==MatchingApp.AppData.Instructions&&void 0!==MatchingApp.AppData.Instructions&&""!==MatchingApp.AppData.Instructions&&(t=MatchingApp.AppData.Instructions+""+t);var n=document.createElement("span");n.id="MAT_iToggle",n.setAttribute("tabindex","0"),$(n).addClass("iDown"),n.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>',$(n).click((function(){!0===$(this).hasClass("iDown")?($(this).removeClass("iDown"),$(this).addClass("iUp"),$("#MAT_activityText").slideUp(500),this.innerHTML='&#9660;<span class="sr-only">Collapse instructions</span>'):($(this).addClass("iDown"),$(this).removeClass("iUp"),$("#MAT_activityText").slideDown(500),this.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>')})),$(n).keyup((function(t){13===t.key&&$(this).click()})),e.innerHTML=t,$(e).hide().appendTo(MAT_appContainer).fadeIn(),$(n).hide().appendTo(MAT_appContainer).fadeIn()},MatchingApp.resetDropzoneStyles=function(t,e){if(!t.classList.contains("dropzone")&&t.classList.contains("MAT_qCol")){const n=t.offsetHeight-e.offsetHeight;document.getElementById(t.parentNode.parentNode.id).style.minHeight=n+"px"}else{let n;if(e.classList.contains("collapsed")?n=e.offsetHeight:(e.classList.add("collapsed"),n=e.offsetHeight,e.classList.remove("collapsed")),1===t.children.length)t.style.background=MatchingApp.dropzoneBackground,t.style.minHeight=MatchingApp.dropzoneHeight+"px";else if(t.children.length>=2){t.style.background=MatchingApp.dropzoneBackground;const e=MatchingApp.dropzoneHeight+(n+5)*(t.children.length-1);if(t.style.minHeight=e+"px",2===t.children.length)t.style.backgroundPositionY=`calc(100% - (${t.style.minHeight} - 10px - ${n}px - 1.25rem) / 2)`;else{const e=(n+5)*(t.children.length-1);t.style.backgroundPositionY=`calc(100% - (${t.style.minHeight} + 5px - 10px - ${e}px - 1.25rem) / 2)`}}}},MatchingApp.assignOrigPos=function(){for(i=0;i<MatchingApp.questionData.length;i++){var t=(temp=document.getElementById("drag"+i)).parentNode;MatchingApp.origPos.splice(i,1,t)}},MatchingApp.hLightEffect=function(t,e){return!1===$(t).hasClass("dropped")&&!0===MatchingApp.hLightingEffect&&!0!==MatchingApp.alreadySelected&&(e?$("#"+t.id).addClass("hover"):(idNum=parseInt(t.id.substr(4)),$("#"+t.id).removeClass("hover"))),!1},MatchingApp.allowDrop=function(t){t.preventDefault()},MatchingApp.allowRevert=function(t){t.preventDefault()},MatchingApp.checkDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.className.search("dropzone"))return!0},MatchingApp.checkParentDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.parentNode.className.search("dropzone"))return!0},MatchingApp.checkChildDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.lastChild.className.search("dropzone"))return!0},MatchingApp.checkSiblingDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.parentNode.parentNode.lastChild.className.search("dropzone"))return!0},MatchingApp.drag=function(t){var e;!1===MatchingApp.disableDragging&&(!0===MatchingApp.notifications&&PNotify.removeAll(),!0===MatchingApp.mobileDevice&&MatchingApp.setHeight(),(e=!0===$(t.target).hasClass("draggableImage")?t.target.parentNode:t.target).setAttribute("ondrop","MatchingApp.drop(event);"),!1===$(t.target).hasClass("dropped")&&("Microsoft Internet Explorer"===navigator.appName?t.dataTransfer.setData("text",e.id):t.dataTransfer.setData("Text",e.id),e.setAttribute("aria-grabbed","true"),e.setAttribute("aria-dropeffect","move")))},MatchingApp.drop=function(t){if(!1===MatchingApp.disableDragging){var e=navigator.appName;data="Microsoft Internet Explorer"===e?t.dataTransfer.getData("text"):t.dataTransfer.getData("Text");var n,i,a,p,c=document.getElementById(data),o=c.id,s=o.substr(4,o.length);c.scrollHeight;t.preventDefault(),MatchingApp.checkDropzone(t.target)&&"drag"===data.substr(0,4)?(p=t.target,n=t.target.parentNode.id):MatchingApp.checkParentDropzone(t.target)&&"drag"===data.substr(0,4)?(p=t.target.parentNode,n=t.target.parentNode.parentNode.id):MatchingApp.checkSiblingDropzone(t.target)&&"drag"===data.substr(0,4)?(p=t.target.parentNode.parentNode.lastChild,n=t.target.parentNode.parentNode.id):MatchingApp.checkChildDropzone(t.target)&&"drag"===data.substr(0,4)&&(p=t.target.lastChild,n=t.target.id);var r=[];if($.each($("#"+n+" .draggableTextNode"),(function(t,e){r.push(e.getAttribute("id"))})),$.inArray(c.getAttribute("id"),r)>-1)return!1;if(void 0!==n)if(idNum=parseInt(n.substr(10)),i=MatchingApp.matchAmount[idNum],a=$(p).children().length+1,c.setAttribute("aria-grabbed","false"),c.removeAttribute("aria-dropeffect"),c.removeAttribute("ondrop"),a>i&&!0===MatchingApp.notifications&&new PNotify({text:$(p).attr("title")+" is full",type:"info"}),"match"===MatchingApp.ActivityType)$(p).is(":empty")&&("text"===MatchingApp.questionData[s].type&&(!0===$(c).hasClass("collapsed")&&$(c).removeClass("collapsed"),c.scrollHeight>MatchingApp.lineHeightNoBorders&&c.scrollHeight<=MatchingApp.lineHeightWithBorders&&$(c).addClass("fullExpand")),MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(c,$("#"+n)[0]),p.appendChild(c),MatchingApp.HandleMobileDrop());else if(a<=i){if("text"===MatchingApp.questionData[s].type&&(!0===$(c).hasClass("collapsed")&&$(c).removeClass("collapsed"),c.scrollHeight>MatchingApp.lineHeightNoBorders&&c.scrollHeight<=MatchingApp.lineHeightWithBorders&&$(c).addClass("fullExpand")),MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(c,$("#"+n)[0]),a===i)p.style.background="none";else if(a<i){let t;c.classList.contains("collapsed")?t=c.offsetHeight:(c.classList.add("collapsed"),t=c.offsetHeight,c.classList.remove("collapsed"));const e=t+p.offsetHeight+5;if(p.style.minHeight=e+"px",p.children.length<1)p.style.backgroundPositionY=`calc(100% - (${p.offsetHeight}px - ${t}px - 10px - 1.25rem) / 2)`;else if(p.children.length>=1){const e=(t+5)*(p.children.length+1);p.style.backgroundPositionY=`calc(100% - (${p.offsetHeight}px + 5px - 10px - ${e}px - 1.25rem) / 2)`}}const t=document.getElementById(c.parentNode.id);MatchingApp.resetDropzoneStyles(t,c),p.appendChild(c)}MatchingApp.checkAllAnswered(),c.classList.contains("collapsed")&&c.classList.remove("collapsed"),c.scrollHeight>MatchingApp.lineHeightNoBorders&&c.scrollHeight<=MatchingApp.lineHeightWithBorders&&c.classList.add("fullExpand"),MatchingApp.checkForCollapse(),c.classList.remove("hover")}},MatchingApp.revert=function(t){if(!1===MatchingApp.disableDragging){data=t.dataTransfer.getData("Text");var e=parseInt(data.substr(4,data.length)),n=MatchingApp.origPos[e];t.preventDefault();const i=document.getElementById(data);!0===$(i).hasClass("collapsed")&&$(i).removeClass("collapsed"),!0===$(i.firstChild).hasClass("MAT_expand")&&$(i.firstChild).remove(),i.setAttribute("aria-grabbed","false"),i.removeAttribute("aria-dropeffect");const a=document.getElementById(i.parentNode.id);MatchingApp.resetDropzoneStyles(a,i),n.appendChild(i),MatchingApp.checkAllAnswered()}},MatchingApp.revertKeyboard=function(t){if(!1===MatchingApp.disableDragging){var e=t.id,n=parseInt(e.substr(4,e.length)),i=MatchingApp.origPos[n];!0===$(t).hasClass("collapsed")&&$(t).removeClass("collapsed"),!0===$(t.firstChild).hasClass("MAT_expand")&&$(t.firstChild).remove(),t.setAttribute("aria-grabbed","false"),t.removeAttribute("aria-dropeffect");const a=document.getElementById(t.parentNode.id);MatchingApp.resetDropzoneStyles(a,t),$(t).hide().appendTo(i).fadeIn(500),$("#screenAlert").html("Returned "+t.innerHTML+" to original position.").focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3),MatchingApp.ExitAccessDropMode(),MatchingApp.checkAllAnswered()}},MatchingApp.evaluateScore=function(){var t='<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOUFFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5OEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5OUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PllHhcQAAACASURBVHjaYmIgB2zx7wBjIGAhSzMDQzmUzcBEtmYI4GeiQPMMIM5iokQzg8/G/0xQBYzkaAZxmKCap8FClRTNEANAmhkYMsAKkQ0hQjMsGj8i8UGGINgENIMAIw7bGIjRDPMCA1CyAkh2kqoZYQB2QwhqRngBM+T5idEMAgABBgBezD9OGUJHCwAAAABJRU5ErkJggg==" alt="right check mark" />',e='<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMThFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5Q0VBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxNkVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuBTV64AAAC/SURBVHjahJPRDcIwDETtCLEAjARSv/iL0hXoQGUFoi5QCUaCBfgJDnJQmubSSlak691zaqscQqA3n/dENEnNR3reCDwvOl3l6KTsITw+UTP6LoYvUqOaUHhU35T0BJgz7wqShan0/wB67aEGqYSH/DM5zoCZUScv5WrhmFsBAKTaGQIUci86ewn3uScBDJi2K2SHtmM2pu1b21kAwLR7tJ0FoLWq1orzG3Ro2gDy9+/0tFv/QtSlcwrbpH8FGAC2umDxE/BZxwAAAABJRU5ErkJggg==" alt="wrong x" />';if("continuous"===MatchingApp.AppData.FeedbackType&&($(".correct").remove(),$(".wrong").remove()),"continuous"===MatchingApp.AppData.FeedbackType)for(i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),tempPar=temp.parentNode.parentNode,tempComp=tempPar.id,ans=parseInt(tempComp.substr(10)),"MI_aSlot"===tempPar.getAttribute("class")&&(MatchingApp.qMatch[i]===MatchingApp.aMatch[ans]?(MatchingApp.scoreEval.push(1),!0===$(temp.firstChild).hasClass("MAT_expand")&&$(temp.firstChild).remove(),temp.classList.contains("collapsed")&&temp.classList.remove("collapsed"),temp.classList.contains("fullExpand")||temp.classList.add("fullExpand"),$(temp).prepend(t),$(temp).css("background-color","#EFE"),$(temp).disabled=!0,!1===$(temp).hasClass("dropped")&&$(temp).toggleClass("dropped")):(MatchingApp.scoreEval.push(0),!0===$(temp.firstChild).hasClass("MAT_expand")&&$(temp.firstChild).remove(),temp.classList.contains("collapsed")&&temp.classList.remove("collapsed"),temp.classList.contains("fullExpand")||temp.classList.add("fullExpand"),$(temp).prepend(e)));else{for(i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),tempPar=temp.parentNode.parentNode,tempComp=tempPar.id,ans=parseInt(tempComp.substr(10)),MatchingApp.savedElements.push(temp.innerHTML),MatchingApp.savedAnswers.push(temp.parentNode.id),temp.classList.contains("collapsed")&&temp.classList.remove("collapsed"),temp.classList.contains("fullExpand")||temp.classList.add("fullExpand"),MatchingApp.qMatch[i]===MatchingApp.aMatch[ans]?(MatchingApp.scoreEval.push(1),$(temp).prepend(t)):(MatchingApp.scoreEval.push(0),$(temp).prepend(e));$("#MAT_buttonSet").hide(),MatchingApp.buildReport()}},MatchingApp.calculateScore=function(){var t=0;for(i=0;i<MatchingApp.questionData.length;i++)switch(MatchingApp.scoreEval[i]){case 1:t+=1;break;default:t=t}return t},MatchingApp.checkAnswers=function(){$(".correct").remove(),$(".wrong").remove(),MatchingApp.scoreEval.length>0&&(MatchingApp.disableDragging=!0),!0===MatchingApp.notifications&&PNotify.removeAll(),MatchingApp.evaluateScore(),MatchingApp.mobileDevice;var t=MatchingApp.calculateScore(),e=$(".wrong");$("#MAT_progress").html("You currently have "+t+" items in the correct category."),$("#MAT_progress").css("color","red");for(var n=0,i=0;i<MatchingApp.matchAmount.length;i++)n+=MatchingApp.matchAmount[i];t===n&&(MatchingApp.finishedQuiz=!0,"continuous"===MatchingApp.AppData.FeedbackType&&($("#MAT_resetWrongButton").remove(),void 0===window.startLocation&&MatchingApp.AppData.IncludePostPage?$(MatchingApp.postQuizButton).hide().appendTo($("#MAT_buttonSet")).fadeIn(500):($("#MAT_buttonSet").append(MatchingApp.restartButton).fadeIn(500),document.getElementById("MAT_checkButton").disabled=!0)),$("#MAT_progress").html("Congratulations, you have successfully matched all "+MatchingApp.questionData.length+" scenarios with their correct approach. You are ready to proceed to the next topic in the course.")),MatchingApp.scoreEval=[],!1===MatchingApp.finishedQuiz&&"continuous"===MatchingApp.AppData.FeedbackType&&e.length>0&&(document.getElementById("MAT_resetWrongButton").disabled=!1,$("#MAT_resetWrongButton").fadeIn(500)),MatchingApp.score=t,MatchingApp.disableDragging=!0,MatchingApp.onComplete()},MatchingApp.checkAllAnswered=function(){if("report"===MatchingApp.AppData.FeedbackType&&void 0!==document.getElementById("MAT_checkButton")){for(var t=0,e=0;e<MatchingApp.matchAmount.length;e++)t+=MatchingApp.matchAmount[e];$(".dropzone .draggableTextNode").length>=t?(document.getElementById("MAT_checkButton").disabled=!1,$("#MAT_checkButton").fadeIn(500)):(document.getElementById("MAT_checkButton").disabled=!0,$("#MAT_checkButton").fadeOut(500))}},MatchingApp.checkForCollapse=function(){$(".draggableTextNode").each((function(){var t=this.id,e=t.substr(4,t.length);if("text"===MatchingApp.questionData[e].type&&!0===$(this.parentNode).hasClass("dropzone")){if(!0===$(this.firstChild).hasClass("MAT_expand"))$(this)[0].scrollWidth===parseInt($(this).innerWidth())&&!0===$(this).hasClass("collapsed")&&($(this.firstChild).remove(),$(this).removeClass("collapsed"),$(this).addClass("fullExpand"));else if($(this)[0].scrollWidth>parseInt($(this).innerWidth())||this.scrollHeight>MatchingApp.lineHeightWithBorders){var n=document.createElement("span");n.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>',$(n).addClass("MAT_expand"),$(n).click((function(){!0===$(this.parentNode).hasClass("collapsed")?($(this.parentNode).removeClass("collapsed"),$(n).addClass("expanded"),n.innerHTML='&#9660;<span class="sr-only">Collapse drag item</span>'):($(this.parentNode).addClass("collapsed"),$(n).removeClass("expanded"),n.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>')})),$(n).keyup((function(t){13===t.key&&(!0===$(this.parentNode).hasClass("collapsed")?($(this.parentNode).removeClass("collapsed"),$(n).addClass("expanded"),n.innerHTML='&#9660;<span class="sr-only">Collapse drag item</span>'):($(this.parentNode).addClass("collapsed"),$(n).removeClass("expanded"),n.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>'))})),$(this).prepend(n),!0===$(this).hasClass("fullExpand")&&$(this).removeClass("fullExpand")}this.scrollHeight>MatchingApp.lineHeightWithBorders&&!1===$(this.firstChild).hasClass("expanded")&&$(this).addClass("collapsed")}!1===$(this.firstChild).hasClass("MAT_expand")&&$(this).addClass("fullExpand")}))},MatchingApp.reset=function(){for(document.querySelectorAll(".dropzone").forEach(t=>{t.style.minHeight=MatchingApp.dropzoneHeight+"px",t.style.background=MatchingApp.dropzoneBackground}),!0===MatchingApp.notifications&&PNotify.removeAll(),MatchingApp.ti=0,$(".correct").remove(),$(".wrong").remove(),MatchingApp.scoreEval=[],i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),!0===$(temp).hasClass("dropped")&&($(temp).toggleClass("dropped"),$(temp).css("background-color","none")),!0===$(temp).hasClass("collapsed")&&$(temp).removeClass("collapsed"),!0===$(temp.firstChild).hasClass("MAT_expand")&&$(temp.firstChild).remove(),$(temp).hide().appendTo(MatchingApp.origPos[i]).fadeIn(500);$(".draggableTextNode").each((function(){this.setAttribute("tabindex",MatchingApp.ti)})),$("#MAT_progress").html('Click the "Check Answers" button to check your progress.'),$("#MAT_progress").css("color","black"),MatchingApp.HandleMobileDrop(),"continuous"===MatchingApp.AppData.FeedbackType&&(MatchingApp.finishedQuiz=!1,$("#MAT_resetButton").fadeOut(500,(function(){$("#MAT_resetButton").remove()})),$("#MAT_buttonSet").append(MatchingApp.resetWrongButton),MatchingApp.sessionTimer=0,MatchingApp.currentAttempts++,MatchingApp.onComplete()),!0===MatchingApp.AppData.Randomize&&$(".MAT_qCol").each((function(){for(var t=$(this).find(".draggableTextNode"),e=0;e<t.length;e++)$(t[e]).remove();if(0==(e=t.length))return!1;for(;--e;){var n=Math.floor(Math.random()*(e+1)),i=t[e],a=t[n];t[e]=a,t[n]=i}for(e=0;e<t.length;e++)$(t[e]).appendTo(this)})),MatchingApp.initAccMAT(),MatchingApp.GoToTop()},MatchingApp.resetWrong=function(){MatchingApp.ti=0,MatchingApp.scoreEval=[],$.each($(".wrong"),(function(){var t=this.parentNode,e=t.id.substr(4);!0===$(t.firstChild).hasClass("MAT_expand")&&($(t.firstChild).remove(),$(t).removeClass("collapsed"),$(t).addClass("fullExpand")),$(t).hide().appendTo(MatchingApp.origPos[e]).fadeIn(500)})),$(".draggableTextNode").each((function(){this.setAttribute("tabindex",MatchingApp.ti)})),$(".wrong").remove(),document.getElementById("MAT_resetWrongButton").disabled=!0,$("#MAT_resetWrongButton").fadeOut(500),$("#MAT_progress").html('Click the "Check Answers" button to check your progress'),$("#MAT_progress").css("color","black"),MatchingApp.HandleMobileDrop(),MatchingApp.GoToTop()},MatchingApp.setMobileSelect=function(t){var e;!1===MatchingApp.disableDragging&&(!0===MatchingApp.notifications&&PNotify.removeAll(),e=$(t.target.parentNode).hasClass("draggableTextNode")?t.target.parentNode:t.target,$(e.parentNode).hasClass("dropzone")?t.stopPropagation():(MatchingApp.EnterAccessDropMode(),!0===MatchingApp.mobileDevice&&MatchingApp.setHeight(),!1===MatchingApp.alreadySelected?(MatchingApp.alreadySelected=!0,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),null!==MatchingApp.AppData.DefaultSelectColor&&void 0!==MatchingApp.AppData.DefaultSelectColor&&"none"!==MatchingApp.AppData.DefaultSelectColor&&MatchingApp.AppData.DefaultSelectColor,e.setAttribute("aria-grabbed","true"),MatchingApp.initMobileSelect(e)):!0===$(e).hasClass("dragMe")?($(e).removeClass("dragMe"),$(e).css("border","thin solid #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","false"),MatchingApp.alreadySelected=!1,MatchingApp.HandleMobileDrop(),MatchingApp.ExitAccessDropMode()):(MatchingApp.HandleMobileDrop(),MatchingApp.alreadySelected=!1,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","true"),MatchingApp.alreadySelected=!0,MatchingApp.initMobileSelect(e))))},MatchingApp.initMobileSelect=function(t){temp=t.innerHTML;var e,n=t.lastChild.alt,i="";if(MatchingApp.selectedElements.push(temp),e=MatchingApp.selectedElements[0],i=MatchingApp.selectedElements[0],MatchingApp.droppedItem=i,void 0!==n&&(i=n,MatchingApp.droppedItem=i),null===document.getElementById("screenAlert")){var a=document.createElement("div");a.id="screenAlert",a.setAttribute("aria-live","assertive"),MatchingApp.containerRef.appendChild(a)}MatchingApp.ShowAccMessage("Selected: "+e),$("#screenAlert").html("Selected: "+i).focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3)},MatchingApp.HandleMobileDrop=function(t){var e="",n="";for(i=0;i<MatchingApp.selectedElements.length;i++)e+=i>0?", "+MatchingApp.selectedElements[i]:MatchingApp.selectedElements[i];""===e&&(e="none"),n=$(t).hasClass("dropzone")?"Dropped: "+MatchingApp.droppedItem+" into "+t.parentNode.firstChild.firstChild.innerHTML+" dropzone":"Dropped: "+MatchingApp.droppedItem,$("#screenAlert").html(n).focus(),setTimeout((function(){$("#screenAlert").html("")}),3e3),MatchingApp.selectedElements=[];var a,p,c,o=$(".dragMe")[0];null!=t&&(a=t.parentNode.id,idNum=parseInt(a.substr(10)),p=MatchingApp.matchAmount[idNum],c=$(t).children().length+1);var s=[];if($.each($("#"+a+" .draggableTextNode"),(function(t,e){s.push(e.getAttribute("id"))})),void 0!==o&&$.inArray(o.getAttribute("id"),s)>-1)return!1;if("match"===MatchingApp.ActivityType)$(t).is(":empty")&&(MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(o,$("#"+a)[0]),$(t).append($(o)),MatchingApp.ExitAccessDropMode());else if(c<=p){if(c<p){o.classList.add("collapsed");let e=o.offsetHeight;o.classList.remove("collapsed");const n=e+t.offsetHeight+5;if(t.style.minHeight=n+"px",t.children.length<1)t.style.backgroundPositionY=`calc(100% - (${t.offsetHeight}px - ${e}px - 10px - 1.25rem) / 2)`;else if(t.children.length>=1){const n=(e+5)*(t.children.length+1);t.style.backgroundPositionY=`calc(100% - (${t.offsetHeight}px + 5px - 10px - ${n}px - 1.25rem) / 2)`}}else c===p&&o&&(t.style.background="none");MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(o,$("#"+a)[0]);const e=document.getElementById(o.parentNode.id);MatchingApp.resetDropzoneStyles(e,o),$(t).append($(o)),MatchingApp.ExitAccessDropMode()}c>p&&!0===MatchingApp.notifications&&new PNotify({text:$(t).attr("title")+" is full",type:"info"}),$(o).removeClass("dragMe"),$(o).removeClass("hover"),$(o).css("border","thin solid #D3D9E3"),null!=o&&(idNum=parseInt(o.id.substr(4)),$(o).attr("aria-grabbed","false"),o.removeAttribute("ondrop")),MatchingApp.checkForCollapse(),MatchingApp.HideAccMessage(),MatchingApp.alreadySelected=!1,MatchingApp.checkAllAnswered()},MatchingApp.initAccMAT=function(){if(!1===MatchingApp.disableDragging){const t=$(MatchingApp.accMATCont+".draggableTextNode");t.click((function(t){$(t.target).hasClass("dropped")||MatchingApp.setMobileSelect(t)})),t.keydown((function(t){$(t.target).hasClass("dropped")||(13===t.which?MatchingApp.setMobileSelect(t):46!==t.which&&8!==t.which||MatchingApp.revertKeyboard(this))}))}},MatchingApp.ShowAccMessage=function(t){$("#AccMessageDisp").html(t),$("#AccMessageDisp").css("visibility","visible")},MatchingApp.HideAccMessage=function(){$("#AccMessageDisp").html(""),$("#AccMessageDisp").css("visibility","hidden")},MatchingApp.EnterAccessDropMode=function(){!0===MatchingApp.mobileDevice&&MatchingApp.setHeight(),$(".draggableTextNode").each((function(){!0===$(this.firstChild).hasClass("MAT_expand")&&(this.firstChild.setAttribute("tabindex","-1"),this.firstChild.setAttribute("aria-hidden","true")),this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")})),$(".MAT_button").each((function(){this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")})),ti=1,$(".dropzone").each((function(){this.setAttribute("tabindex",ti),ti++})),$(".dropzone").focus(MatchingApp.HandleAccessDropzoneFocus),$(".dropzone").blur(MatchingApp.HandleAccessDropzoneBlur)},MatchingApp.HandleAccessDropzoneBlur=function(){ansId=parseInt(this.parentNode.id.substr(10)),MatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",MatchingApp.HandleAccessDropRequest)},MatchingApp.HandleAccessDropzoneFocus=function(){ansId=parseInt(this.parentNode.id.substr(10)),MatchingApp.savedBackgrounds[ansId],$(this).keyup(MatchingApp.HandleAccessDropRequest),this.setAttribute("onclick","MatchingApp.HandleMobileDrop(this)")},MatchingApp.HandleAccessDropRequest=function(t){13===t.which&&($(this).click(),setTimeout((function(){MatchingApp.ExitAccessDropMode()}),200))},MatchingApp.ExitAccessDropMode=function(){MatchingApp.ti=0,$(".draggableTextNode").each((function(){!0===$(this.firstChild).hasClass("MAT_expand")&&(this.firstChild.setAttribute("tabindex",MatchingApp.ti),this.firstChild.setAttribute("aria-hidden","false")),this.setAttribute("tabindex",MatchingApp.ti),this.setAttribute("aria-hidden","false")})),MatchingApp.checkAnswersButton.setAttribute("tabindex",MatchingApp.ti),"continuous"===MatchingApp.AppData.FeedbackType?MatchingApp.resetWrongButton.setAttribute("tabindex",MatchingApp.ti):MatchingApp.resetButton.setAttribute("tabindex",MatchingApp.ti),$("#MAT_instructions").attr("tabindex",MatchingApp.ti),$(".MAT_button").each((function(){this.setAttribute("aria-hidden","false")})),$(".dropzone").unbind("focus",MatchingApp.HandleAccessDropzoneFocus),$(".dropzone").unbind("blur",MatchingApp.HandleAccessDropzoneBlur),$(".dropzone").each((function(){!1===MatchingApp.mobileDevice&&this.removeAttribute("onclick"),ansId=parseInt(this.parentNode.id.substr(10)),this.setAttribute("tabindex",-1),MatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",MatchingApp.HandleAccessDropRequest),this.blur()})),MatchingApp.HideAccMessage(),setTimeout((function(){MatchingApp.GoToTop()}),100)},MatchingApp.touchDrag=function(t){!0===MatchingApp.mobileDevice&&MatchingApp.setHeight();var e=t.target,n=e.id,i=parseInt(n.substr(4,n.length)),a=MatchingApp.origPos[i];$(e).addClass("absolute"),a.appendChild(e);var p=t.targetTouches[0];p.pageX<$("#MAT_content").width()-$(e).width()?e.style.left=p.pageX-$(e).width()/2+"px":e.style.left=$("#MAT_content").width()-$(e).width()+"px",p.pageY<$("#MAT_content").height()-$(e).height()?e.style.top=p.pageY-$(e).height()/2+"px":e.style.top=$("#MAT_content").height()-$(e).height()+"px",t.preventDefault();var c=$("body").scrollLeft(),o=$("body").scrollTop(),s=document.elementFromPoint(p.pageX-c,p.pageY-o);s&&s.id?"MAT_lowerScrollZone"===s.id||"MAT_lowerScrollZoneLabel"===s.id?MatchingApp.StartScrollZoneScroll("down",t.target):"MAT_upperScrollZone"===s.id||"MAT_upperScrollZoneLabel"===s.id?MatchingApp.StartScrollZoneScroll("up",t.target):MatchingApp.EndScrollZoneScroll():MatchingApp.EndScrollZoneScroll(),!1===MatchingApp.mobileDragging&&(MatchingApp.mobileDragging=!0,e.addEventListener("touchend",(function(t){var n,i,a;MatchingApp.EndScrollZoneScroll(),$(t.target).css("display","none");var p=document.elementFromPoint(t.changedTouches[0].pageX-c,t.changedTouches[0].pageY-o);if($(e).removeClass("absolute"),e.removeAttribute("style"),p){var s=document.getElementById(p.id);s&&("connect_box dropzone"===s.className?(n=p.parentNode.id,idNum=parseInt(n.substr(10)),i=MatchingApp.matchAmount[idNum],a=$(p).children().length+1,"match"===MatchingApp.ActivityType?$(s).is(":empty")&&(p.appendChild(e),MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(e,$("#"+n)[0]),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):a<=i&&(MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(e,$("#"+n)[0]),p.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4)))):"connect_box dropzone"===s.parentNode.className&&(n=p.parentNode.parentNode.id,idNum=parseInt(n.substr(10)),i=MatchingApp.matchAmount[idNum],a=$(p.parentNode).children().length+1,"match"===MatchingApp.ActivityType?$(s.parentNode).is(":empty")&&(p.parentNode.appendChild(e),MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(e,$("#"+n)[0]),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):a<=i&&(p.parentNode.appendChild(e),MatchingApp.SCORMEnabled&&MatchingApp.sendDropEvent(e,$("#"+n)[0]),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4)))))}!0===$("#MAT_iToggle").hasClass("iDown")&&$("#MAT_iToggle").click(),MatchingApp.checkAllAnswered(),MatchingApp.HideScrollZones(),MatchingApp.mobileDragging=!1}))),MatchingApp.ShowScrollZones(t.target)},MatchingApp.EmbedMedia=function(t,e){var n,i,a=document.createElement("div");switch(a.setAttribute("class","MAT_Media"),e.type){case"link":(i=document.createElement("a")).setAttribute("class","MAT_MediaLink"),i.setAttribute("href",e.src),i.setAttribute("target","_blank"),i.setAttribute("tabindex",MatchingApp.ti),e.description?i.innerHTML=e.description:i.innerHTML="Link",a.appendChild(i);break;case"image":"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink&&((n=document.createElement("a")).setAttribute("class","MAT_MediaImage"),n.setAttribute("href",e.mediaLink),n.setAttribute("tabindex",MatchingApp.ti),n.setAttribute("target","_blank")),i=document.createElement("img"),"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink||i.setAttribute("class","MAT_MediaImage"),i.setAttribute("src",e.src),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width&&i.setAttribute("width",e.width),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height&&i.setAttribute("height",e.height),a.setAttribute("style","text-align:center;"),e.description&&i.setAttribute("alt",e.description),"none"===e.mediaLink||null===e.mediaLink||void 0===e.mediaLink||""===e.mediaLink?a.appendChild(i):(n.appendChild(i),a.appendChild(n));break;case"YouTubeVideo":(validSrc=MatchingApp.validateYouTubeLink(e.src))&&((i=document.createElement("iframe")).setAttribute("class","MAT_MediaEmbeddedVideo"),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width?i.setAttribute("width",e.width):i.setAttribute("width","420"),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height?i.setAttribute("height",e.height):i.setAttribute("height","315"),i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("src",validSrc),a.setAttribute("style","text-align:center;"),e.description&&i.setAttribute("alt",e.description),a.appendChild(i),e.altLink&&"none"!==e.altLink&&((n=document.createElement("a")).setAttribute("class","MAT_MediaAltLink"),n.setAttribute("href",e.altLink),n.setAttribute("tabindex",MatchingApp.ti),n.setAttribute("target","_blank"),n.innerHTML="Alternate Link.",a.appendChild(n)));break;case"text":case"kaltura":(i=document.createElement("p")).setAttribute("class","MAT_MediaText"),i.setAttribute("target","_blank"),i.innerHTML=e.content,a.appendChild(i)}$(a).hide().appendTo(t).fadeIn(500)},MatchingApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")&&(-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")&&"https://www.youtube.com/embed/"+(code=t.slice(t.indexOf("?v=")+3)):-1!==t.indexOf("https://www.youtube.com/embed/")&&t.slice(t.indexOf("src")+5,t.indexOf('"',t.indexOf("src")+5)))},MatchingApp.timer=function(){MatchingApp.sessionTimer++},MatchingApp.setHeight=function(){if(!1===MatchingApp.heightSet&&!0===MatchingApp.mobileDevice){var t=$("#qColum_1").height();$("#MAT_qColContainer").css("min-height",t+20+"px"),MatchingApp.heightSet=!0}},MatchingApp.onComplete=function(){if(MatchingApp.currentAttempts++,MatchingApp.SCORMConnected){var t=pipwerks.SCORM.data.get("cmi.score.raw"),e=parseInt(t);(""!==t&&MatchingApp.score>e||0===e)&&(pipwerks.SCORM.data.set("cmi.score.raw",MatchingApp.score),pipwerks.SCORM.data.set("cmi.completion_status","completed"),pipwerks.SCORM.data.set("cmi.success_status","passed"),pipwerks.SCORM.data.save())}MatchingApp.disableDragging=!0},MatchingApp.parseData=function(){MatchingApp.AppData.Advanced||(MatchingApp.AppData.Advanced={},MatchingApp.AppData.Advanced.HeadingLevel=MatchingApp.AppData.HeadingLevel,MatchingApp.AppData.Advanced.QuestionColumns=MatchingApp.AppData.QuestionColumns,MatchingApp.AppData.Advanced.HighlightEffect=MatchingApp.AppData.HighlightEffect,MatchingApp.AppData.Advanced.HorizontalAlignment=MatchingApp.AppData.HorizontalAlignment),MatchingApp.AppData.Advanced.HeadingLevel=parseInt(MatchingApp.AppData.Advanced.HeadingLevel)},MatchingApp.editorFallback=function(){void 0!==window.startLocation&&(0!==window.startLocation&&1!==window.startLocation||"none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText||(0===window.startLocation?($(MAT_appContainer).empty(),(MAT_preQuizText=document.createElement("p")).id="MAT_preQuizText",$(MAT_preQuizText).hide().appendTo(MAT_appContainer).fadeIn(500),MAT_preQuizText.innerHTML="Please begin building your activity."):"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia||($("#MAT_buttonSet").remove(),(MAT_preQuizText=document.createElement("p")).id="MAT_preQuizText",$(MAT_preQuizText).hide().appendTo(MAT_appContainer).fadeIn(500),MAT_preQuizText.innerHTML="No Pre-Activity content has been added.")),3===window.startLocation&&("none"!==MatchingApp.AppData.PostActivityText&&null!==MatchingApp.AppData.PostActivityText&&void 0!==MatchingApp.AppData.PostActivityText&&""!==MatchingApp.AppData.PostActivityText||("none"===MatchingApp.AppData.PostActivityMedia||null===MatchingApp.AppData.PostActivityMedia||void 0===MatchingApp.AppData.PostActivityMedia||""===MatchingApp.AppData.PostActivityMedia?(MAT_postQuizText.innerHTML="No Post-Activity content has been added.",$(MAT_postQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)):$(MAT_postQuizText).remove())),$("#MAT_buttonSet").empty())},MatchingApp.establishScorm=function(){console.log("Getting SCORM API..."),$.getScript("../../../facilitator_tools/Matching/thirdpartylib/SCORM_API_wrapper.js").done((function(){console.log("SCORM API successfully loaded."),MatchingApp.SCORMConnectionInterval=setInterval(MatchingApp.connectionAttempt,100)})).fail((function(){console.log("Unable to load SCORM API."),MatchingApp.SCORMEnabled=!1,MatchingApp.startActivity()}))},MatchingApp.connectionAttempt=function(){if(MatchingApp.SCORMConnectionAttempts++,pipwerks.SCORM.connection.initialize()){clearInterval(MatchingApp.SCORMConnectionInterval),console.log("SCORM connection made."),$.getScript("../../../facilitator_tools/Matching/thirdpartylib/SCORM_interactions.js").done((function(){console.log("SCORM Interaction API successfully loaded."),MatchingApp.SCORMSession=new SCORMSession(MatchingApp.AppData.ActivityID),MatchingApp.SCORMInteraction=new SCORMInteraction(MatchingApp.SCORMSession),MatchingApp.sendButtonEvent("Started activity."),MatchingApp.startActivity()})).fail((function(){console.log("Unable to load SCORM Interaction API."),MatchingApp.SCORMEnabled=!1,MatchingApp.startActivity()})),pipwerks.SCORM.data.set("cmi.score.min",0);var t=0;for(j=0;j<MatchingApp.AnsSlotData.length;j++)for(k=0;k<MatchingApp.questionData.length;k++)MatchingApp.questionData[k].answer===MatchingApp.AnsSlotData[j].key&&t++;pipwerks.SCORM.data.set("cmi.score.max",t),MatchingApp.SCORMConnected=!0,$(window).bind("beforeunload",(function(){pipwerks.SCORM.connection.terminate()}))}else MatchingApp.SCORMConnectionAttempts>9&&(console.log("SCORM connection attempted "+MatchingApp.SCORMConnectionAttempts+" times. Aborting."),MatchingApp.SCORMConnected=!1,MatchingApp.SCORMEnabled=!1,MatchingApp.startActivity(),clearInterval(MatchingApp.SCORMConnectionInterval))},MatchingApp.sendDropEvent=function(t,e){var n,i="incorrect",a=parseInt(t.id.substr(4)),p=parseInt(e.id.substr(10));MatchingApp.qMatch[a]===MatchingApp.aMatch[p]&&(i="correct"),n=t.innerText+" -> "+e.firstChild.firstChild.innerText,MatchingApp.SCORMInteraction.post(n,i),MatchingApp.SCORMInteraction=new SCORMInteraction(MatchingApp.SCORMSession)},MatchingApp.sendButtonEvent=function(t){MatchingApp.SCORMInteraction.post(t,"neutral"),MatchingApp.SCORMInteraction=new SCORMInteraction(MatchingApp.SCORMSession)},MatchingApp.GoToTop=function(){console.log("go to top disabled");var t=MatchingApp.containerID,e="#"+t;document.getElementById(t).scrollIntoView();window.top.location.href.indexOf("viewContent")>-1&&$("html, body",window.parent.document).scrollTop($(e).offset().top+$("#ContentView",window.parent.document).offset().top)};